<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/home/navigation/HomeNavGraph.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/home/navigation/HomeNavGraph.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.home.navigation&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.Share&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.navigation.NavController&#10;import androidx.navigation.NavGraphBuilder&#10;import androidx.navigation.NavType&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.navigation&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import id.stargan.intikasir.feature.home.ui.HomeScreen&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListScreen&#10;import id.stargan.intikasir.feature.product.navigation.ProductRoutes&#10;import id.stargan.intikasir.feature.settings.ui.StoreSettingsScreen&#10;import id.stargan.intikasir.feature.settings.ui.StoreSettingsViewModel&#10;import id.stargan.intikasir.feature.pos.ui.PosScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.cart.CartScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.payment.PaymentScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.receipt.ReceiptScreen&#10;import id.stargan.intikasir.feature.pos.navigation.PosRoutes&#10;import id.stargan.intikasir.feature.pos.print.ReceiptPrinter&#10;import id.stargan.intikasir.feature.pos.print.ESCPosPrinter&#10;import id.stargan.intikasir.feature.history.ui.HistoryScreen&#10;import id.stargan.intikasir.feature.history.ui.HistoryDetailScreen&#10;import id.stargan.intikasir.feature.auth.domain.usecase.GetCurrentUserUseCase&#10;import id.stargan.intikasir.domain.model.UserRole&#10;import javax.inject.Inject&#10;import kotlinx.coroutines.launch&#10;&#10;/**&#10; * Navigation graph untuk Home feature&#10; */&#10;fun NavGraphBuilder.homeNavGraph(&#10;    navController: NavController,&#10;    onLogout: () -&gt; Unit&#10;) {&#10;    composable(HomeRoutes.HOME) {&#10;        HomeScreen(&#10;            onMenuClick = { route -&gt;&#10;                if (route == &quot;cashier&quot;) {&#10;                    // Navigate to cashier route with optional transactionId param omitted&#10;                    navController.navigate(PosRoutes.POS)&#10;                } else {&#10;                    navController.navigate(route)&#10;                }&#10;            },&#10;            onLogout = onLogout&#10;        )&#10;    }&#10;&#10;    // Product List Screen&#10;    composable(HomeRoutes.PRODUCTS) {&#10;        ProductListScreen(&#10;            onProductClick = { productId -&gt;&#10;                navController.navigate(ProductRoutes.productDetail(productId))&#10;            },&#10;            onAddProductClick = {&#10;                navController.navigate(ProductRoutes.PRODUCT_ADD)&#10;            },&#10;            onManageCategoriesClick = {&#10;                navController.navigate(ProductRoutes.CATEGORY_MANAGE)&#10;            },&#10;            onBackClick = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Product Detail Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_DETAIL) {&#10;        PlaceholderScreen(title = &quot;Detail Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Product Add Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_ADD) {&#10;        PlaceholderScreen(title = &quot;Tambah Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Product Edit Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_EDIT) {&#10;        PlaceholderScreen(title = &quot;Edit Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Category Management Screen (Placeholder)&#10;    composable(ProductRoutes.CATEGORY_MANAGE) {&#10;        PlaceholderScreen(title = &quot;Kelola Kategori&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.HISTORY) {&#10;        HistoryScreen(&#10;            onBack = { navController.navigateUp() },&#10;            onOpenDetail = { txId -&gt; navController.navigate(&quot;${HomeRoutes.HISTORY}/detail/$txId&quot;) }&#10;        )&#10;    }&#10;&#10;    composable(&quot;${HomeRoutes.HISTORY}/detail/{transactionId}&quot;, arguments = listOf(&#10;        navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;    )) { backStackEntry -&gt;&#10;        val txId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;        val settingsViewModel = hiltViewModel&lt;StoreSettingsViewModel&gt;()&#10;        val settingsState by settingsViewModel.uiState.collectAsState()&#10;        val context = androidx.compose.ui.platform.LocalContext.current&#10;        val scope = rememberCoroutineScope()&#10;        val posVm = hiltViewModel&lt;id.stargan.intikasir.feature.pos.ui.PosViewModelReactive&gt;()&#10;        val historyVm = hiltViewModel&lt;id.stargan.intikasir.feature.history.viewmodel.HistoryViewModel&gt;()&#10;&#10;        // Get current user role using GetCurrentUserUseCase&#10;        val getCurrentUserUseCase: GetCurrentUserUseCase = hiltViewModel&lt;HistoryRoleViewModel&gt;().getCurrentUserUseCase&#10;        val currentUser by getCurrentUserUseCase().collectAsState(initial = null)&#10;&#10;        HistoryDetailScreen(&#10;            transactionId = txId,&#10;            onBack = { navController.navigateUp() },&#10;            onPrint = { tx -&gt;&#10;                scope.launch {&#10;                    posVm.loadTransaction(txId)&#10;                    val items = posVm.uiState.value.transactionItems&#10;                    val settings = settingsState.settings&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(context, settings, tx, items)&#10;                    ReceiptPrinter.printOrSave(context, settings, result.pdfUri, result.fileName)&#10;                }&#10;            },&#10;            onShare = { tx -&gt;&#10;                scope.launch {&#10;                    posVm.loadTransaction(txId)&#10;                    val items = posVm.uiState.value.transactionItems&#10;                    val settings = settingsState.settings&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(context, settings, tx, items)&#10;                    ReceiptPrinter.sharePdf(context, result.pdfUri)&#10;                }&#10;            },&#10;            onDelete = { tx -&gt;&#10;                scope.launch {&#10;                    historyVm.deleteTransaction(tx.id)&#10;                    navController.navigateUp()&#10;                }&#10;            },&#10;            isAdmin = currentUser?.role == UserRole.ADMIN&#10;        )&#10;    }&#10;&#10;    composable(HomeRoutes.EXPENSES) {&#10;        PlaceholderScreen(title = &quot;Pengeluaran&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.REPORTS) {&#10;        PlaceholderScreen(title = &quot;Laporan&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.PRINT_RECEIPT) {&#10;        PlaceholderScreen(title = &quot;Cetak Resi&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // POS Screen (Kasir) - Reactive version&#10;    composable(&#10;        route = PosRoutes.POS_WITH_ID,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) {&#10;                type = NavType.StringType&#10;                nullable = true&#10;                defaultValue = null&#10;            }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)&#10;&#10;        PosScreenReactive(&#10;            transactionId = transactionId,&#10;            onNavigateToCart = { txId -&gt;&#10;                navController.navigate(PosRoutes.cart(txId))&#10;            },&#10;            onNavigateToPayment = { txId -&gt;&#10;                navController.navigate(PosRoutes.payment(txId))&#10;            },&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Cart Screen - Reactive version&#10;    composable(&#10;        route = PosRoutes.CART,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;&#10;        CartScreenReactive(&#10;            transactionId = transactionId,&#10;            onNavigateBack = { navController.navigateUp() },&#10;            onNavigateToPayment = { txId -&gt;&#10;                navController.navigate(PosRoutes.payment(txId))&#10;            }&#10;        )&#10;    }&#10;&#10;    // Payment Screen - Reactive version&#10;    composable(&#10;        route = PosRoutes.PAYMENT,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;&#10;        PaymentScreenReactive(&#10;            transactionId = transactionId,&#10;            onPaymentSuccess = { txId -&gt;&#10;                navController.navigate(PosRoutes.receipt(txId)) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            },&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Receipt Screen&#10;    composable(&#10;        route = PosRoutes.RECEIPT,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;        val viewModel = hiltViewModel&lt;id.stargan.intikasir.feature.pos.ui.PosViewModelReactive&gt;()&#10;        val settingsViewModel = hiltViewModel&lt;StoreSettingsViewModel&gt;()&#10;        val state by viewModel.uiState.collectAsState()&#10;        val settingsState by settingsViewModel.uiState.collectAsState()&#10;        val context = androidx.compose.ui.platform.LocalContext.current&#10;        val scope = rememberCoroutineScope()&#10;&#10;        // Load transaction for receipt&#10;        LaunchedEffect(transactionId) {&#10;            viewModel.loadTransaction(transactionId)&#10;        }&#10;&#10;        ReceiptScreen(&#10;            transactionNumber = state.transaction?.transactionNumber ?: &quot;INV-XXXXX&quot;,&#10;            total = state.total,&#10;            cashReceived = state.transaction?.cashReceived ?: 0.0,&#10;            cashChange = state.transaction?.cashChange ?: 0.0,&#10;            paymentMethod = state.paymentMethod.name,&#10;            onFinish = {&#10;                navController.navigate(HomeRoutes.HOME) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            },&#10;            onPrint = {&#10;                val tx = state.transaction ?: return@ReceiptScreen&#10;                val items = state.transactionItems&#10;                val settings = settingsState.settings&#10;                if (settings?.useEscPosDirect == true &amp;&amp; !settings.printerAddress.isNullOrBlank()) {&#10;                    ESCPosPrinter.printReceipt(context, settings, tx, items)&#10;                } else {&#10;                    // Thermal PDF&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(&#10;                        context = context,&#10;                        settings = settings,&#10;                        transaction = tx,&#10;                        items = items&#10;                    )&#10;                    ReceiptPrinter.printOrSave(&#10;                        context = context,&#10;                        settings = settings,&#10;                        pdfUri = result.pdfUri,&#10;                        jobName = result.fileName&#10;                    )&#10;                }&#10;            },&#10;            onShare = {&#10;                val tx = state.transaction ?: return@ReceiptScreen&#10;                val items = state.transactionItems&#10;                val settings = settingsState.settings&#10;                val result = ReceiptPrinter.generateThermalReceiptPdf(&#10;                    context = context,&#10;                    settings = settings,&#10;                    transaction = tx,&#10;                    items = items&#10;                )&#10;                ReceiptPrinter.sharePdf(context, result.pdfUri)&#10;            },&#10;            onNewTransaction = {&#10;                navController.navigate(PosRoutes.POS) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Store Settings Screen&#10;    composable(HomeRoutes.SETTINGS) {&#10;        StoreSettingsScreen(&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Placeholder screen untuk menu yang belum diimplementasi&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun PlaceholderScreen(&#10;    title: String,&#10;    onBack: () -&gt; Unit&#10;) {&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(title) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onBack) {&#10;                        Icon(&#10;                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                            contentDescription = &quot;Back&quot;&#10;                        )&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Text(&#10;                text = &quot;Halaman $title\n(Belum diimplementasi)&quot;,&#10;                style = MaterialTheme.typography.titleLarge,&#10;                textAlign = TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;// Simple ViewModel to expose GetCurrentUserUseCase for navigation&#10;@HiltViewModel&#10;class HistoryRoleViewModel @Inject constructor(&#10;    val getCurrentUserUseCase: GetCurrentUserUseCase&#10;) : androidx.lifecycle.ViewModel()&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.home.navigation&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.Share&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.navigation.NavController&#10;import androidx.navigation.NavGraphBuilder&#10;import androidx.navigation.NavType&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.navigation&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import dagger.hilt.android.lifecycle.HiltViewModel&#10;import id.stargan.intikasir.feature.home.ui.HomeScreen&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListScreen&#10;import id.stargan.intikasir.feature.product.navigation.ProductRoutes&#10;import id.stargan.intikasir.feature.settings.ui.StoreSettingsScreen&#10;import id.stargan.intikasir.feature.settings.ui.StoreSettingsViewModel&#10;import id.stargan.intikasir.feature.pos.ui.PosScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.cart.CartScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.payment.PaymentScreenReactive&#10;import id.stargan.intikasir.feature.pos.ui.receipt.ReceiptScreen&#10;import id.stargan.intikasir.feature.pos.navigation.PosRoutes&#10;import id.stargan.intikasir.feature.pos.print.ReceiptPrinter&#10;import id.stargan.intikasir.feature.pos.print.ESCPosPrinter&#10;import id.stargan.intikasir.feature.history.ui.HistoryScreen&#10;import id.stargan.intikasir.feature.history.ui.HistoryDetailScreen&#10;import id.stargan.intikasir.feature.auth.domain.usecase.GetCurrentUserUseCase&#10;import id.stargan.intikasir.domain.model.UserRole&#10;import javax.inject.Inject&#10;import kotlinx.coroutines.launch&#10;import androidx.lifecycle.ViewModel&#10;&#10;/**&#10; * Navigation graph untuk Home feature&#10; */&#10;fun NavGraphBuilder.homeNavGraph(&#10;    navController: NavController,&#10;    onLogout: () -&gt; Unit&#10;) {&#10;    composable(HomeRoutes.HOME) {&#10;        HomeScreen(&#10;            onMenuClick = { route -&gt;&#10;                if (route == &quot;cashier&quot;) {&#10;                    // Navigate to cashier route with optional transactionId param omitted&#10;                    navController.navigate(PosRoutes.POS)&#10;                } else {&#10;                    navController.navigate(route)&#10;                }&#10;            },&#10;            onLogout = onLogout&#10;        )&#10;    }&#10;&#10;    // Product List Screen&#10;    composable(HomeRoutes.PRODUCTS) {&#10;        ProductListScreen(&#10;            onProductClick = { productId -&gt;&#10;                navController.navigate(ProductRoutes.productDetail(productId))&#10;            },&#10;            onAddProductClick = {&#10;                navController.navigate(ProductRoutes.PRODUCT_ADD)&#10;            },&#10;            onManageCategoriesClick = {&#10;                navController.navigate(ProductRoutes.CATEGORY_MANAGE)&#10;            },&#10;            onBackClick = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Product Detail Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_DETAIL) {&#10;        PlaceholderScreen(title = &quot;Detail Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Product Add Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_ADD) {&#10;        PlaceholderScreen(title = &quot;Tambah Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Product Edit Screen (Placeholder)&#10;    composable(ProductRoutes.PRODUCT_EDIT) {&#10;        PlaceholderScreen(title = &quot;Edit Produk&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // Category Management Screen (Placeholder)&#10;    composable(ProductRoutes.CATEGORY_MANAGE) {&#10;        PlaceholderScreen(title = &quot;Kelola Kategori&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.HISTORY) {&#10;        HistoryScreen(&#10;            onBack = { navController.navigateUp() },&#10;            onOpenDetail = { txId -&gt; navController.navigate(&quot;${HomeRoutes.HISTORY}/detail/$txId&quot;) }&#10;        )&#10;    }&#10;&#10;    composable(&quot;${HomeRoutes.HISTORY}/detail/{transactionId}&quot;, arguments = listOf(&#10;        navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;    )) { backStackEntry -&gt;&#10;        val txId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;        val settingsViewModel = hiltViewModel&lt;StoreSettingsViewModel&gt;()&#10;        val settingsState by settingsViewModel.uiState.collectAsState()&#10;        val context = androidx.compose.ui.platform.LocalContext.current&#10;        val scope = rememberCoroutineScope()&#10;        val posVm = hiltViewModel&lt;id.stargan.intikasir.feature.pos.ui.PosViewModelReactive&gt;()&#10;        val historyVm = hiltViewModel&lt;id.stargan.intikasir.feature.history.viewmodel.HistoryViewModel&gt;()&#10;&#10;        // Get current user role using GetCurrentUserUseCase&#10;        val getCurrentUserUseCase: GetCurrentUserUseCase = hiltViewModel&lt;HistoryRoleViewModel&gt;().getCurrentUserUseCase&#10;        val currentUser by getCurrentUserUseCase().collectAsState(initial = null)&#10;&#10;        HistoryDetailScreen(&#10;            transactionId = txId,&#10;            onBack = { navController.navigateUp() },&#10;            onPrint = { tx -&gt;&#10;                scope.launch {&#10;                    posVm.loadTransaction(txId)&#10;                    val items = posVm.uiState.value.transactionItems&#10;                    val settings = settingsState.settings&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(context, settings, tx, items)&#10;                    ReceiptPrinter.printOrSave(context, settings, result.pdfUri, result.fileName)&#10;                }&#10;            },&#10;            onShare = { tx -&gt;&#10;                scope.launch {&#10;                    posVm.loadTransaction(txId)&#10;                    val items = posVm.uiState.value.transactionItems&#10;                    val settings = settingsState.settings&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(context, settings, tx, items)&#10;                    ReceiptPrinter.sharePdf(context, result.pdfUri)&#10;                }&#10;            },&#10;            onDelete = { tx -&gt;&#10;                scope.launch {&#10;                    historyVm.deleteTransaction(tx.id)&#10;                    navController.navigateUp()&#10;                }&#10;            },&#10;            isAdmin = currentUser?.role == UserRole.ADMIN&#10;        )&#10;    }&#10;&#10;    composable(HomeRoutes.EXPENSES) {&#10;        PlaceholderScreen(title = &quot;Pengeluaran&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.REPORTS) {&#10;        PlaceholderScreen(title = &quot;Laporan&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    composable(HomeRoutes.PRINT_RECEIPT) {&#10;        PlaceholderScreen(title = &quot;Cetak Resi&quot;, onBack = { navController.navigateUp() })&#10;    }&#10;&#10;    // POS Screen (Kasir) - Reactive version&#10;    composable(&#10;        route = PosRoutes.POS_WITH_ID,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) {&#10;                type = NavType.StringType&#10;                nullable = true&#10;                defaultValue = null&#10;            }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)&#10;&#10;        PosScreenReactive(&#10;            transactionId = transactionId,&#10;            onNavigateToCart = { txId -&gt;&#10;                navController.navigate(PosRoutes.cart(txId))&#10;            },&#10;            onNavigateToPayment = { txId -&gt;&#10;                navController.navigate(PosRoutes.payment(txId))&#10;            },&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Cart Screen - Reactive version&#10;    composable(&#10;        route = PosRoutes.CART,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;&#10;        CartScreenReactive(&#10;            transactionId = transactionId,&#10;            onNavigateBack = { navController.navigateUp() },&#10;            onNavigateToPayment = { txId -&gt;&#10;                navController.navigate(PosRoutes.payment(txId))&#10;            }&#10;        )&#10;    }&#10;&#10;    // Payment Screen - Reactive version&#10;    composable(&#10;        route = PosRoutes.PAYMENT,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;&#10;        PaymentScreenReactive(&#10;            transactionId = transactionId,&#10;            onPaymentSuccess = { txId -&gt;&#10;                navController.navigate(PosRoutes.receipt(txId)) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            },&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;&#10;    // Receipt Screen&#10;    composable(&#10;        route = PosRoutes.RECEIPT,&#10;        arguments = listOf(&#10;            navArgument(&quot;transactionId&quot;) { type = NavType.StringType }&#10;        )&#10;    ) { backStackEntry -&gt;&#10;        val transactionId = backStackEntry.arguments?.getString(&quot;transactionId&quot;)!!&#10;        val viewModel = hiltViewModel&lt;id.stargan.intikasir.feature.pos.ui.PosViewModelReactive&gt;()&#10;        val settingsViewModel = hiltViewModel&lt;StoreSettingsViewModel&gt;()&#10;        val state by viewModel.uiState.collectAsState()&#10;        val settingsState by settingsViewModel.uiState.collectAsState()&#10;        val context = androidx.compose.ui.platform.LocalContext.current&#10;        val scope = rememberCoroutineScope()&#10;&#10;        // Load transaction for receipt&#10;        LaunchedEffect(transactionId) {&#10;            viewModel.loadTransaction(transactionId)&#10;        }&#10;&#10;        ReceiptScreen(&#10;            transactionNumber = state.transaction?.transactionNumber ?: &quot;INV-XXXXX&quot;,&#10;            total = state.total,&#10;            cashReceived = state.transaction?.cashReceived ?: 0.0,&#10;            cashChange = state.transaction?.cashChange ?: 0.0,&#10;            paymentMethod = state.paymentMethod.name,&#10;            onFinish = {&#10;                navController.navigate(HomeRoutes.HOME) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            },&#10;            onPrint = {&#10;                val tx = state.transaction ?: return@ReceiptScreen&#10;                val items = state.transactionItems&#10;                val settings = settingsState.settings&#10;                if (settings?.useEscPosDirect == true &amp;&amp; !settings.printerAddress.isNullOrBlank()) {&#10;                    ESCPosPrinter.printReceipt(context, settings, tx, items)&#10;                } else {&#10;                    // Thermal PDF&#10;                    val result = ReceiptPrinter.generateThermalReceiptPdf(&#10;                        context = context,&#10;                        settings = settings,&#10;                        transaction = tx,&#10;                        items = items&#10;                    )&#10;                    ReceiptPrinter.printOrSave(&#10;                        context = context,&#10;                        settings = settings,&#10;                        pdfUri = result.pdfUri,&#10;                        jobName = result.fileName&#10;                    )&#10;                }&#10;            },&#10;            onShare = {&#10;                val tx = state.transaction ?: return@ReceiptScreen&#10;                val items = state.transactionItems&#10;                val settings = settingsState.settings&#10;                val result = ReceiptPrinter.generateThermalReceiptPdf(&#10;                    context = context,&#10;                    settings = settings,&#10;                    transaction = tx,&#10;                    items = items&#10;                )&#10;                ReceiptPrinter.sharePdf(context, result.pdfUri)&#10;            },&#10;            onNewTransaction = {&#10;                navController.navigate(PosRoutes.POS) {&#10;                    popUpTo(HomeRoutes.HOME) { inclusive = false }&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Store Settings Screen&#10;    composable(HomeRoutes.SETTINGS) {&#10;        StoreSettingsScreen(&#10;            onNavigateBack = { navController.navigateUp() }&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Placeholder screen untuk menu yang belum diimplementasi&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun PlaceholderScreen(&#10;    title: String,&#10;    onBack: () -&gt; Unit&#10;) {&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(title) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onBack) {&#10;                        Icon(&#10;                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                            contentDescription = &quot;Back&quot;&#10;                        )&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Text(&#10;                text = &quot;Halaman $title\n(Belum diimplementasi)&quot;,&#10;                style = MaterialTheme.typography.titleLarge,&#10;                textAlign = TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;// Simple ViewModel to expose GetCurrentUserUseCase for navigation&#10;@HiltViewModel&#10;class HistoryRoleViewModel @Inject constructor(&#10;    val getCurrentUserUseCase: GetCurrentUserUseCase&#10;) : ViewModel()" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>