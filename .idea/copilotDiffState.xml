<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/pos/ui/components/PosProductItemReactive.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/pos/ui/components/PosProductItemReactive.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.pos.ui.components&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.MoreVert&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import id.stargan.intikasir.domain.model.Product&#10;import id.stargan.intikasir.data.local.entity.TransactionItemEntity&#10;import id.stargan.intikasir.ui.common.Stepper&#10;import id.stargan.intikasir.ui.common.LeftButtonMode&#10;import java.text.NumberFormat&#10;import java.util.Locale&#10;&#10;@Composable&#10;fun PosProductItemReactive(&#10;    modifier: Modifier = Modifier,&#10;    product: Product,&#10;    transactionItem: TransactionItemEntity?,&#10;    onAdd: () -&gt; Unit,&#10;    onChangeQty: (Int) -&gt; Unit,&#10;    onSetDiscount: ((Double) -&gt; Unit)? = null,&#10;) {&#10;    val nf = NumberFormat.getCurrencyInstance(Locale.Builder().setLanguage(&quot;id&quot;).setRegion(&quot;ID&quot;).build())&#10;    var showDiscountDialog by remember { mutableStateOf(false) }&#10;&#10;    Surface(&#10;        modifier = modifier.fillMaxWidth(),&#10;        tonalElevation = 1.dp,&#10;        shape = MaterialTheme.shapes.medium&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(12.dp)&#10;                .defaultMinSize(minHeight = 80.dp)&#10;            ,&#10;            verticalAlignment = Alignment.Top&#10;        ) {&#10;            Column(Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                Text(&#10;                    product.name,&#10;                    style = MaterialTheme.typography.bodyLarge,&#10;                    maxLines = 1,&#10;                    overflow = TextOverflow.Ellipsis&#10;                )&#10;&#10;                // Show original price (always)&#10;                if (transactionItem != null &amp;&amp; transactionItem.discount &gt; 0) {&#10;                    // Show original price with strikethrough indicator&#10;                    Text(&#10;                        &quot;@${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;&#10;                    // Calculate and show discounted price per unit&#10;                    val discountPerUnit = transactionItem.discount / transactionItem.quantity&#10;                    val discountedPricePerUnit = product.price - discountPerUnit&#10;                    Text(&#10;                        nf.format(discountedPricePerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;) + &quot;/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        color = MaterialTheme.colorScheme.primary&#10;                    )&#10;                } else {&#10;                    Text(&#10;                        nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;) + &quot;/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium&#10;                    )&#10;                }&#10;&#10;                // Show total discount if applied&#10;                if (transactionItem != null &amp;&amp; transactionItem.discount &gt; 0) {&#10;                    val discountPerUnit = transactionItem.discount / transactionItem.quantity&#10;                    Text(&#10;                        &quot;Diskon: ${nf.format(discountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs (Total: ${nf.format(transactionItem.discount).replace(&quot;Rp&quot;, &quot;Rp &quot;)})&quot;,&#10;                        color = MaterialTheme.colorScheme.primary,&#10;                        style = MaterialTheme.typography.labelSmall&#10;                    )&#10;                }&#10;&#10;                // Show subtotal with quantity&#10;                if (transactionItem != null &amp;&amp; transactionItem.quantity &gt; 0) {&#10;                    val discountPerUnit = if (transactionItem.discount &gt; 0) {&#10;                        transactionItem.discount / transactionItem.quantity&#10;                    } else 0.0&#10;                    val priceAfterDiscount = product.price - discountPerUnit&#10;&#10;                    Text(&#10;                        &quot;${transactionItem.quantity} x ${nf.format(priceAfterDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)} = ${nf.format(transactionItem.subtotal).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                        style = MaterialTheme.typography.labelSmall,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;&#10;                // Low stock warning&#10;                if (product.stock &lt;= (product.lowStockThreshold ?: 10)) {&#10;                    Text(&#10;                        &quot;Stok menipis&quot;,&#10;                        color = MaterialTheme.colorScheme.error,&#10;                        style = MaterialTheme.typography.labelSmall&#10;                    )&#10;                }&#10;            }&#10;&#10;            if (transactionItem == null) {&#10;                Button(onClick = onAdd, enabled = product.stock &gt; 0) {&#10;                    Text(&quot;Tambah&quot;)&#10;                }&#10;            } else {&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(4.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    if (onSetDiscount != null) {&#10;                        IconButton(onClick = { showDiscountDialog = true }) {&#10;                            Icon(Icons.Default.MoreVert, contentDescription = &quot;Diskon&quot;)&#10;                        }&#10;                    }&#10;                    Stepper(&#10;                        value = transactionItem.quantity,&#10;                        onValueChange = onChangeQty,&#10;                        min = 0,&#10;                        max = product.stock,&#10;                        leftButtonMode = LeftButtonMode.Delete,&#10;                        onDelete = { onChangeQty(0) },&#10;                        step = 1&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Discount dialog - Opsi B: Input diskon PER PCS&#10;    if (showDiscountDialog &amp;&amp; transactionItem != null &amp;&amp; onSetDiscount != null) {&#10;        // Calculate current discount per unit&#10;        val currentDiscountPerUnit = if (transactionItem.discount &gt; 0) {&#10;            (transactionItem.discount / transactionItem.quantity).toInt()&#10;        } else 0&#10;&#10;        var discountPerUnitText by remember { mutableStateOf(currentDiscountPerUnit.toString()) }&#10;        val discountPerUnit = discountPerUnitText.toIntOrNull() ?: 0&#10;        val totalDiscount = discountPerUnit * transactionItem.quantity&#10;        val maxDiscountPerUnit = product.price.toInt()&#10;&#10;        AlertDialog(&#10;            onDismissRequest = { showDiscountDialog = false },&#10;            title = { Text(&quot;Diskon per Pcs&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    // Info produk&#10;                    Card(&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.secondaryContainer&#10;                        )&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier.padding(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(4.dp)&#10;                        ) {&#10;                            Text(&#10;                                product.name,&#10;                                style = MaterialTheme.typography.titleSmall,&#10;                                fontWeight = FontWeight.SemiBold&#10;                            )&#10;                            Text(&#10;                                &quot;Harga: ${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                style = MaterialTheme.typography.bodySmall&#10;                            )&#10;                            Text(&#10;                                &quot;Quantity: ${transactionItem.quantity} pcs&quot;,&#10;                                style = MaterialTheme.typography.bodySmall&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Input diskon per pcs&#10;                    OutlinedTextField(&#10;                        value = discountPerUnitText,&#10;                        onValueChange = {&#10;                            val filtered = it.filter { c -&gt; c.isDigit() }&#10;                            discountPerUnitText = filtered&#10;                        },&#10;                        label = { Text(&quot;Diskon per Pcs&quot;) },&#10;                        prefix = { Text(&quot;Rp &quot;) },&#10;                        suffix = { Text(&quot;/pcs&quot;) },&#10;                        singleLine = true,&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),&#10;                        supportingText = {&#10;                            Text(&#10;                                &quot;Maks: ${nf.format(maxDiscountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                style = MaterialTheme.typography.labelSmall&#10;                            )&#10;                        },&#10;                        isError = discountPerUnit &gt; maxDiscountPerUnit&#10;                    )&#10;&#10;                    // Preview&#10;                    Card(&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.tertiaryContainer&#10;                        )&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier.padding(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(6.dp)&#10;                        ) {&#10;                            Text(&#10;                                &quot;Preview:&quot;,&#10;                                style = MaterialTheme.typography.labelMedium,&#10;                                fontWeight = FontWeight.Bold&#10;                            )&#10;&#10;                            val priceAfterDiscount = product.price - discountPerUnit&#10;                            val subtotal = priceAfterDiscount * transactionItem.quantity&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&quot;Harga asli:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                Text(&#10;                                    &quot;${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall&#10;                                )&#10;                            }&#10;&#10;                            if (discountPerUnit &gt; 0) {&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Diskon per pcs:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;-${nf.format(discountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.primary&#10;                                    )&#10;                                }&#10;&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Harga jadi:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;${nf.format(priceAfterDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        fontWeight = FontWeight.SemiBold&#10;                                    )&#10;                                }&#10;&#10;                                HorizontalDivider()&#10;&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Total diskon:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;-${nf.format(totalDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.primary&#10;                                    )&#10;                                }&#10;                            }&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&quot;Subtotal:&quot;, style = MaterialTheme.typography.bodyMedium, fontWeight = FontWeight.Bold)&#10;                                Text(&#10;                                    nf.format(subtotal).replace(&quot;Rp&quot;, &quot;Rp &quot;),&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Bold&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        if (discountPerUnit &lt;= maxDiscountPerUnit) {&#10;                            // Convert per-unit discount to total discount&#10;                            val totalDiscountAmount = discountPerUnit.toDouble() * transactionItem.quantity&#10;                            onSetDiscount(totalDiscountAmount)&#10;                            showDiscountDialog = false&#10;                        }&#10;                    },&#10;                    enabled = discountPerUnit &lt;= maxDiscountPerUnit&#10;                ) {&#10;                    Text(&quot;Simpan&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { showDiscountDialog = false }) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.pos.ui.components&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.MoreVert&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import id.stargan.intikasir.domain.model.Product&#10;import id.stargan.intikasir.data.local.entity.TransactionItemEntity&#10;import id.stargan.intikasir.ui.common.Stepper&#10;import id.stargan.intikasir.ui.common.LeftButtonMode&#10;import java.text.NumberFormat&#10;import java.util.Locale&#10;&#10;@Composable&#10;fun PosProductItemReactive(&#10;    modifier: Modifier = Modifier,&#10;    product: Product,&#10;    transactionItem: TransactionItemEntity?,&#10;    onAdd: () -&gt; Unit,&#10;    onChangeQty: (Int) -&gt; Unit,&#10;    onSetDiscount: ((Double) -&gt; Unit)? = null,&#10;) {&#10;    val nf = NumberFormat.getCurrencyInstance(Locale.Builder().setLanguage(&quot;id&quot;).setRegion(&quot;ID&quot;).build())&#10;    var showDiscountDialog by remember { mutableStateOf(false) }&#10;&#10;    Surface(&#10;        modifier = modifier.fillMaxWidth(),&#10;        tonalElevation = 1.dp,&#10;        shape = MaterialTheme.shapes.medium&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(12.dp)&#10;                .defaultMinSize(minHeight = 80.dp)&#10;            ,&#10;            verticalAlignment = Alignment.Top&#10;        ) {&#10;            Column(Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                Text(&#10;                    product.name,&#10;                    style = MaterialTheme.typography.bodyLarge,&#10;                    maxLines = 1,&#10;                    overflow = TextOverflow.Ellipsis&#10;                )&#10;&#10;                // Show original price (always)&#10;                if (transactionItem != null &amp;&amp; transactionItem.discount &gt; 0) {&#10;                    // Show original price with strikethrough indicator&#10;                    Text(&#10;                        &quot;@${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;&#10;                    // Calculate and show discounted price per unit&#10;                    val discountPerUnit = transactionItem.discount / transactionItem.quantity&#10;                    val discountedPricePerUnit = product.price - discountPerUnit&#10;                    Text(&#10;                        nf.format(discountedPricePerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;) + &quot;/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium,&#10;                        color = MaterialTheme.colorScheme.primary&#10;                    )&#10;                } else {&#10;                    Text(&#10;                        nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;) + &quot;/pcs&quot;,&#10;                        style = MaterialTheme.typography.labelMedium&#10;                    )&#10;                }&#10;&#10;                // Show total discount if applied&#10;                if (transactionItem != null &amp;&amp; transactionItem.discount &gt; 0) {&#10;                    val discountPerUnit = transactionItem.discount / transactionItem.quantity&#10;                    Text(&#10;                        &quot;Diskon: ${nf.format(discountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs (Total: ${nf.format(transactionItem.discount).replace(&quot;Rp&quot;, &quot;Rp &quot;)})&quot;,&#10;                        color = MaterialTheme.colorScheme.primary,&#10;                        style = MaterialTheme.typography.labelSmall&#10;                    )&#10;                }&#10;&#10;                // Show subtotal with quantity&#10;                if (transactionItem != null &amp;&amp; transactionItem.quantity &gt; 0) {&#10;                    val discountPerUnit = if (transactionItem.discount &gt; 0) {&#10;                        transactionItem.discount / transactionItem.quantity&#10;                    } else 0.0&#10;                    val priceAfterDiscount = product.price - discountPerUnit&#10;&#10;                    Text(&#10;                        &quot;${transactionItem.quantity} x ${nf.format(priceAfterDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)} = ${nf.format(transactionItem.subtotal).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                        style = MaterialTheme.typography.labelSmall,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                    )&#10;                }&#10;&#10;                // Low stock warning&#10;                if (product.stock &lt;= (product.lowStockThreshold ?: 10)) {&#10;                    Text(&#10;                        &quot;Stok menipis&quot;,&#10;                        color = MaterialTheme.colorScheme.error,&#10;                        style = MaterialTheme.typography.labelSmall&#10;                    )&#10;                }&#10;            }&#10;&#10;            if (transactionItem == null) {&#10;                Button(onClick = onAdd, enabled = product.stock &gt; 0) {&#10;                    Text(&quot;Tambah&quot;)&#10;                }&#10;            } else {&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(4.dp),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    if (onSetDiscount != null) {&#10;                        IconButton(onClick = { showDiscountDialog = true }) {&#10;                            Icon(Icons.Default.MoreVert, contentDescription = &quot;Diskon&quot;)&#10;                        }&#10;                    }&#10;                    Stepper(&#10;                        value = transactionItem.quantity,&#10;                        onValueChange = onChangeQty,&#10;                        min = 0,&#10;                        max = product.stock,&#10;                        leftButtonMode = LeftButtonMode.Delete,&#10;                        onDelete = { onChangeQty(0) },&#10;                        step = 1&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Discount dialog - Opsi B: Input diskon PER PCS&#10;    if (showDiscountDialog &amp;&amp; transactionItem != null &amp;&amp; onSetDiscount != null) {&#10;        // Calculate current discount per unit&#10;        val currentDiscountPerUnit = if (transactionItem.discount &gt; 0) {&#10;            (transactionItem.discount / transactionItem.quantity).toInt()&#10;        } else 0&#10;&#10;        var discountPerUnitText by remember { mutableStateOf(currentDiscountPerUnit.toString()) }&#10;        val discountPerUnit = discountPerUnitText.toIntOrNull() ?: 0&#10;        val totalDiscount = discountPerUnit * transactionItem.quantity&#10;        val maxDiscountPerUnit = product.price.toInt()&#10;&#10;        AlertDialog(&#10;            onDismissRequest = { showDiscountDialog = false },&#10;            title = { Text(&quot;Diskon per Pcs&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    // Info produk&#10;                    Card(&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.secondaryContainer&#10;                        )&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier.padding(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(4.dp)&#10;                        ) {&#10;                            Text(&#10;                                product.name,&#10;                                style = MaterialTheme.typography.titleSmall,&#10;                                fontWeight = FontWeight.SemiBold&#10;                            )&#10;                            Text(&#10;                                &quot;Harga: ${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                style = MaterialTheme.typography.bodySmall&#10;                            )&#10;                            Text(&#10;                                &quot;Quantity: ${transactionItem.quantity} pcs&quot;,&#10;                                style = MaterialTheme.typography.bodySmall&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Input diskon per pcs&#10;                    OutlinedTextField(&#10;                        value = discountPerUnitText,&#10;                        onValueChange = {&#10;                            val filtered = it.filter { c -&gt; c.isDigit() }&#10;                            discountPerUnitText = filtered&#10;                        },&#10;                        label = { Text(&quot;Diskon per Pcs&quot;) },&#10;                        prefix = { Text(&quot;Rp &quot;) },&#10;                        suffix = { Text(&quot;/pcs&quot;) },&#10;                        singleLine = true,&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),&#10;                        supportingText = {&#10;                            Text(&#10;                                &quot;Maks: ${nf.format(maxDiscountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                style = MaterialTheme.typography.labelSmall&#10;                            )&#10;                        },&#10;                        isError = discountPerUnit &gt; maxDiscountPerUnit&#10;                    )&#10;&#10;                    // Preview&#10;                    Card(&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.tertiaryContainer&#10;                        )&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier.padding(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(6.dp)&#10;                        ) {&#10;                            Text(&#10;                                &quot;Preview:&quot;,&#10;                                style = MaterialTheme.typography.labelMedium,&#10;                                fontWeight = FontWeight.Bold&#10;                            )&#10;&#10;                            val priceAfterDiscount = product.price - discountPerUnit&#10;                            val subtotal = priceAfterDiscount * transactionItem.quantity&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&quot;Harga asli:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                Text(&#10;                                    &quot;${nf.format(product.price).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall&#10;                                )&#10;                            }&#10;&#10;                            if (discountPerUnit &gt; 0) {&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Diskon per pcs:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;-${nf.format(discountPerUnit).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.primary&#10;                                    )&#10;                                }&#10;&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Harga jadi:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;${nf.format(priceAfterDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)}/pcs&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        fontWeight = FontWeight.SemiBold&#10;                                    )&#10;                                }&#10;&#10;                                HorizontalDivider()&#10;&#10;                                Row(&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    horizontalArrangement = Arrangement.SpaceBetween&#10;                                ) {&#10;                                    Text(&quot;Total diskon:&quot;, style = MaterialTheme.typography.bodySmall)&#10;                                    Text(&#10;                                        &quot;-${nf.format(totalDiscount).replace(&quot;Rp&quot;, &quot;Rp &quot;)}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.primary&#10;                                    )&#10;                                }&#10;                            }&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&quot;Subtotal:&quot;, style = MaterialTheme.typography.bodyMedium, fontWeight = FontWeight.Bold)&#10;                                Text(&#10;                                    nf.format(subtotal).replace(&quot;Rp&quot;, &quot;Rp &quot;),&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Bold&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        if (discountPerUnit &lt;= maxDiscountPerUnit) {&#10;                            // Send per-unit discount (ViewModel will multiply by quantity)&#10;                            onSetDiscount(discountPerUnit.toDouble())&#10;                            showDiscountDialog = false&#10;                        }&#10;                    },&#10;                    enabled = discountPerUnit &lt;= maxDiscountPerUnit&#10;                ) {&#10;                    Text(&quot;Simpan&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { showDiscountDialog = false }) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>