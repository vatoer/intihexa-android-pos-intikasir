<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/domain/usecase/SaveCategoryUseCase.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/domain/usecase/SaveCategoryUseCase.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.product.domain.usecase&#10;&#10;import id.stargan.intikasir.domain.model.Category&#10;import id.stargan.intikasir.feature.product.domain.repository.ProductRepository&#10;import javax.inject.Inject&#10;&#10;/**&#10; * Use case untuk save category (insert or update)&#10; */&#10;class SaveCategoryUseCase @Inject constructor(&#10;    private val productRepository: ProductRepository&#10;) {&#10;    suspend operator fun invoke(category: Category) {&#10;        if (category.id.isEmpty()) {&#10;            // New category - insert&#10;            productRepository.insertCategory(category)&#10;        } else {&#10;            // Existing category - update&#10;            productRepository.updateCategory(category)&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.product.domain.usecase&#10;&#10;import id.stargan.intikasir.domain.model.Category&#10;import id.stargan.intikasir.feature.product.domain.repository.ProductRepository&#10;import javax.inject.Inject&#10;&#10;/**&#10; * Use case untuk save category (insert or update)&#10; * Uses upsert pattern - Room's REPLACE strategy handles both insert and update&#10; */&#10;class SaveCategoryUseCase @Inject constructor(&#10;    private val productRepository: ProductRepository&#10;) {&#10;    suspend operator fun invoke(category: Category) {&#10;        // Room's @Insert with OnConflictStrategy.REPLACE handles both insert and update&#10;        productRepository.insertCategory(category)&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/category/CategoryManagementScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/category/CategoryManagementScreen.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.product.ui.category&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import id.stargan.intikasir.domain.model.Category&#10;&#10;/**&#10; * Category Management Screen&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun CategoryManagementScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: CategoryManagementViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    Scaffold(&#10;        modifier = modifier,&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Kelola Kategori&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(&#10;                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                            contentDescription = &quot;Kembali&quot;&#10;                        )&#10;                    }&#10;                }&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            FloatingActionButton(&#10;                onClick = { viewModel.onEvent(CategoryManagementUiEvent.ShowAddDialog) }&#10;            ) {&#10;                Icon(Icons.Default.Add, contentDescription = &quot;Tambah Kategori&quot;)&#10;            }&#10;        },&#10;        snackbarHost = {&#10;            // Error Snackbar&#10;            if (uiState.error != null) {&#10;                Snackbar(&#10;                    modifier = Modifier.padding(16.dp),&#10;                    containerColor = MaterialTheme.colorScheme.errorContainer,&#10;                    contentColor = MaterialTheme.colorScheme.onErrorContainer,&#10;                    action = {&#10;                        TextButton(&#10;                            onClick = { viewModel.onEvent(CategoryManagementUiEvent.DismissError) }&#10;                        ) {&#10;                            Text(&quot;OK&quot;)&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(uiState.error ?: &quot;&quot;)&#10;                }&#10;            }&#10;&#10;            // Success Snackbar&#10;            if (uiState.successMessage != null) {&#10;                Snackbar(&#10;                    modifier = Modifier.padding(16.dp),&#10;                    containerColor = MaterialTheme.colorScheme.primaryContainer,&#10;                    contentColor = MaterialTheme.colorScheme.onPrimaryContainer,&#10;                    action = {&#10;                        TextButton(&#10;                            onClick = { viewModel.onEvent(CategoryManagementUiEvent.DismissSuccess) }&#10;                        ) {&#10;                            Text(&quot;OK&quot;)&#10;                        }&#10;                    }&#10;                ) {&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.CheckCircle,&#10;                            contentDescription = null,&#10;                            tint = MaterialTheme.colorScheme.primary&#10;                        )&#10;                        Text(uiState.successMessage ?: &quot;&quot;)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    ) { paddingValues -&gt;&#10;        if (uiState.isLoading) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                CircularProgressIndicator()&#10;            }&#10;        } else if (uiState.categories.isEmpty()) {&#10;            EmptyCategoriesState(&#10;                onAddClick = { viewModel.onEvent(CategoryManagementUiEvent.ShowAddDialog) },&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues)&#10;            )&#10;        } else {&#10;            LazyColumn(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues),&#10;                contentPadding = PaddingValues(16.dp),&#10;                verticalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                items(uiState.categories) { category -&gt;&#10;                    CategoryCard(&#10;                        category = category,&#10;                        onEditClick = {&#10;                            viewModel.onEvent(CategoryManagementUiEvent.ShowEditDialog(category))&#10;                        },&#10;                        onDeleteClick = {&#10;                            viewModel.onEvent(CategoryManagementUiEvent.ShowDeleteDialog(category))&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Add/Edit Dialog&#10;    if (uiState.showAddDialog || uiState.showEditDialog) {&#10;        CategoryFormDialog(&#10;            isEdit = uiState.showEditDialog,&#10;            name = uiState.categoryName,&#10;            description = uiState.categoryDescription,&#10;            color = uiState.categoryColor,&#10;            icon = uiState.categoryIcon,&#10;            nameError = uiState.nameError,&#10;            isSaving = uiState.isSaving,&#10;            onNameChange = { viewModel.onEvent(CategoryManagementUiEvent.NameChanged(it)) },&#10;            onDescriptionChange = { viewModel.onEvent(CategoryManagementUiEvent.DescriptionChanged(it)) },&#10;            onColorChange = { viewModel.onEvent(CategoryManagementUiEvent.ColorChanged(it)) },&#10;            onIconChange = { viewModel.onEvent(CategoryManagementUiEvent.IconChanged(it)) },&#10;            onSave = { viewModel.onEvent(CategoryManagementUiEvent.SaveCategory) },&#10;            onDismiss = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) }&#10;        )&#10;    }&#10;&#10;    // Delete Confirmation Dialog&#10;    if (uiState.showDeleteDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) },&#10;            title = { Text(&quot;Hapus Kategori&quot;) },&#10;            text = {&#10;                Text(&quot;Apakah Anda yakin ingin menghapus kategori \&quot;${uiState.selectedCategory?.name}\&quot;?&quot;)&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = { viewModel.onEvent(CategoryManagementUiEvent.ConfirmDelete) }&#10;                ) {&#10;                    Text(&quot;Hapus&quot;, color = MaterialTheme.colorScheme.error)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(&#10;                    onClick = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) }&#10;                ) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CategoryCard(&#10;    category: Category,&#10;    onEditClick: () -&gt; Unit,&#10;    onDeleteClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                // Icon/Color&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(&#10;                            try {&#10;                                Color(android.graphics.Color.parseColor(category.color ?: &quot;#6200EE&quot;))&#10;                            } catch (e: Exception) {&#10;                                MaterialTheme.colorScheme.primaryContainer&#10;                            }&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Text(&#10;                        text = category.icon ?: &quot;&quot;,&#10;                        style = MaterialTheme.typography.titleLarge&#10;                    )&#10;                }&#10;&#10;                Column {&#10;                    Text(&#10;                        text = category.name,&#10;                        style = MaterialTheme.typography.titleMedium,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                    if (!category.description.isNullOrBlank()) {&#10;                        Text(&#10;                            text = category.description,&#10;                            style = MaterialTheme.typography.bodySmall,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                IconButton(onClick = onEditClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Edit,&#10;                        contentDescription = &quot;Edit&quot;,&#10;                        tint = MaterialTheme.colorScheme.primary&#10;                    )&#10;                }&#10;                IconButton(onClick = onDeleteClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Delete,&#10;                        contentDescription = &quot;Hapus&quot;,&#10;                        tint = MaterialTheme.colorScheme.error&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun EmptyCategoriesState(&#10;    onAddClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.Category,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(80.dp),&#10;            tint = MaterialTheme.colorScheme.outline&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;        Text(&#10;            text = &quot;Belum ada kategori&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;&#10;        Text(&#10;            text = &quot;Tambahkan kategori untuk mengorganisir produk&quot;,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(24.dp))&#10;&#10;        Button(onClick = onAddClick) {&#10;            Icon(Icons.Default.Add, contentDescription = null)&#10;            Spacer(modifier = Modifier.width(8.dp))&#10;            Text(&quot;Tambah Kategori&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun CategoryFormDialog(&#10;    isEdit: Boolean,&#10;    name: String,&#10;    description: String,&#10;    color: String,&#10;    icon: String,&#10;    nameError: String?,&#10;    isSaving: Boolean = false,&#10;    onNameChange: (String) -&gt; Unit,&#10;    onDescriptionChange: (String) -&gt; Unit,&#10;    onColorChange: (String) -&gt; Unit,&#10;    onIconChange: (String) -&gt; Unit,&#10;    onSave: () -&gt; Unit,&#10;    onDismiss: () -&gt; Unit&#10;) {&#10;    val predefinedIcons = listOf(&quot;&quot;, &quot;&quot;, &quot;☕&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)&#10;    val predefinedColors = listOf(&#10;        &quot;#6200EE&quot;, &quot;#03DAC5&quot;, &quot;#FF0266&quot;, &quot;#00C853&quot;,&#10;        &quot;#FF6D00&quot;, &quot;#2196F3&quot;, &quot;#E91E63&quot;, &quot;#9C27B0&quot;&#10;    )&#10;&#10;    var selectedIconIndex by remember { mutableStateOf(predefinedIcons.indexOf(icon).takeIf { it &gt;= 0 } ?: 0) }&#10;    var selectedColorIndex by remember { mutableStateOf(predefinedColors.indexOf(color).takeIf { it &gt;= 0 } ?: 0) }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(if (isEdit) &quot;Edit Kategori&quot; else &quot;Tambah Kategori&quot;) },&#10;        text = {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                OutlinedTextField(&#10;                    value = name,&#10;                    onValueChange = onNameChange,&#10;                    label = { Text(&quot;Nama Kategori&quot;) },&#10;                    isError = nameError != null,&#10;                    supportingText = nameError?.let { { Text(it) } },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    singleLine = true&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = description,&#10;                    onValueChange = onDescriptionChange,&#10;                    label = { Text(&quot;Deskripsi&quot;) },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    maxLines = 3&#10;                )&#10;&#10;                // Icon Selection&#10;                Text(&quot;Pilih Icon&quot;, style = MaterialTheme.typography.labelMedium)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                ) {&#10;                    predefinedIcons.forEachIndexed { index, iconEmoji -&gt;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .size(48.dp)&#10;                                .clip(RoundedCornerShape(8.dp))&#10;                                .background(&#10;                                    if (index == selectedIconIndex)&#10;                                        MaterialTheme.colorScheme.primaryContainer&#10;                                    else&#10;                                        MaterialTheme.colorScheme.surfaceVariant&#10;                                )&#10;                                .clickable {&#10;                                    selectedIconIndex = index&#10;                                    onIconChange(iconEmoji)&#10;                                },&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Text(text = iconEmoji, style = MaterialTheme.typography.titleMedium)&#10;                        }&#10;                    }&#10;                }&#10;&#10;                // Color Selection&#10;                Text(&quot;Pilih Warna&quot;, style = MaterialTheme.typography.labelMedium)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                ) {&#10;                    predefinedColors.forEachIndexed { index, colorHex -&gt;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .size(48.dp)&#10;                                .clip(CircleShape)&#10;                                .background(Color(android.graphics.Color.parseColor(colorHex)))&#10;                                .clickable {&#10;                                    selectedColorIndex = index&#10;                                    onColorChange(colorHex)&#10;                                }&#10;                        ) {&#10;                            if (index == selectedColorIndex) {&#10;                                Icon(&#10;                                    imageVector = Icons.Default.Check,&#10;                                    contentDescription = null,&#10;                                    tint = Color.White,&#10;                                    modifier = Modifier.align(Alignment.Center)&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            Button(&#10;                onClick = onSave,&#10;                enabled = !isSaving&#10;            ) {&#10;                if (isSaving) {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.size(16.dp),&#10;                        strokeWidth = 2.dp,&#10;                        color = MaterialTheme.colorScheme.onPrimary&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                }&#10;                Text(if (isSaving) &quot;Menyimpan...&quot; else &quot;Simpan&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(&#10;                onClick = onDismiss,&#10;                enabled = !isSaving&#10;            ) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.product.ui.category&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import id.stargan.intikasir.domain.model.Category&#10;&#10;/**&#10; * Category Management Screen&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun CategoryManagementScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: CategoryManagementViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    // Handle error messages&#10;    LaunchedEffect(uiState.error) {&#10;        uiState.error?.let { message -&gt;&#10;            snackbarHostState.showSnackbar(&#10;                message = message,&#10;                duration = SnackbarDuration.Long&#10;            )&#10;            viewModel.onEvent(CategoryManagementUiEvent.DismissError)&#10;        }&#10;    }&#10;&#10;    // Handle success messages&#10;    LaunchedEffect(uiState.successMessage) {&#10;        uiState.successMessage?.let { message -&gt;&#10;            snackbarHostState.showSnackbar(&#10;                message = message,&#10;                duration = SnackbarDuration.Short&#10;            )&#10;            viewModel.onEvent(CategoryManagementUiEvent.DismissSuccess)&#10;        }&#10;    }&#10;&#10;    Scaffold(&#10;        modifier = modifier,&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Kelola Kategori&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(&#10;                            imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                            contentDescription = &quot;Kembali&quot;&#10;                        )&#10;                    }&#10;                }&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            FloatingActionButton(&#10;                onClick = { viewModel.onEvent(CategoryManagementUiEvent.ShowAddDialog) }&#10;            ) {&#10;                Icon(Icons.Default.Add, contentDescription = &quot;Tambah Kategori&quot;)&#10;            }&#10;        },&#10;        snackbarHost = {&#10;            SnackbarHost(hostState = snackbarHostState)&#10;        }&#10;    ) { paddingValues -&gt;&#10;        if (uiState.isLoading) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                CircularProgressIndicator()&#10;            }&#10;        } else if (uiState.categories.isEmpty()) {&#10;            EmptyCategoriesState(&#10;                onAddClick = { viewModel.onEvent(CategoryManagementUiEvent.ShowAddDialog) },&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues)&#10;            )&#10;        } else {&#10;            LazyColumn(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(paddingValues),&#10;                contentPadding = PaddingValues(16.dp),&#10;                verticalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                items(uiState.categories) { category -&gt;&#10;                    CategoryCard(&#10;                        category = category,&#10;                        onEditClick = {&#10;                            viewModel.onEvent(CategoryManagementUiEvent.ShowEditDialog(category))&#10;                        },&#10;                        onDeleteClick = {&#10;                            viewModel.onEvent(CategoryManagementUiEvent.ShowDeleteDialog(category))&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Add/Edit Dialog&#10;    if (uiState.showAddDialog || uiState.showEditDialog) {&#10;        CategoryFormDialog(&#10;            isEdit = uiState.showEditDialog,&#10;            name = uiState.categoryName,&#10;            description = uiState.categoryDescription,&#10;            color = uiState.categoryColor,&#10;            icon = uiState.categoryIcon,&#10;            nameError = uiState.nameError,&#10;            isSaving = uiState.isSaving,&#10;            onNameChange = { viewModel.onEvent(CategoryManagementUiEvent.NameChanged(it)) },&#10;            onDescriptionChange = { viewModel.onEvent(CategoryManagementUiEvent.DescriptionChanged(it)) },&#10;            onColorChange = { viewModel.onEvent(CategoryManagementUiEvent.ColorChanged(it)) },&#10;            onIconChange = { viewModel.onEvent(CategoryManagementUiEvent.IconChanged(it)) },&#10;            onSave = { viewModel.onEvent(CategoryManagementUiEvent.SaveCategory) },&#10;            onDismiss = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) }&#10;        )&#10;    }&#10;&#10;    // Delete Confirmation Dialog&#10;    if (uiState.showDeleteDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) },&#10;            title = { Text(&quot;Hapus Kategori&quot;) },&#10;            text = {&#10;                Text(&quot;Apakah Anda yakin ingin menghapus kategori \&quot;${uiState.selectedCategory?.name}\&quot;?&quot;)&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = { viewModel.onEvent(CategoryManagementUiEvent.ConfirmDelete) }&#10;                ) {&#10;                    Text(&quot;Hapus&quot;, color = MaterialTheme.colorScheme.error)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(&#10;                    onClick = { viewModel.onEvent(CategoryManagementUiEvent.HideDialogs) }&#10;                ) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun CategoryCard(&#10;    category: Category,&#10;    onEditClick: () -&gt; Unit,&#10;    onDeleteClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Card(&#10;        modifier = modifier.fillMaxWidth(),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                // Icon/Color&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(&#10;                            try {&#10;                                Color(android.graphics.Color.parseColor(category.color ?: &quot;#6200EE&quot;))&#10;                            } catch (e: Exception) {&#10;                                MaterialTheme.colorScheme.primaryContainer&#10;                            }&#10;                        ),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Text(&#10;                        text = category.icon ?: &quot;&quot;,&#10;                        style = MaterialTheme.typography.titleLarge&#10;                    )&#10;                }&#10;&#10;                Column {&#10;                    Text(&#10;                        text = category.name,&#10;                        style = MaterialTheme.typography.titleMedium,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                    if (!category.description.isNullOrBlank()) {&#10;                        Text(&#10;                            text = category.description,&#10;                            style = MaterialTheme.typography.bodySmall,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                IconButton(onClick = onEditClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Edit,&#10;                        contentDescription = &quot;Edit&quot;,&#10;                        tint = MaterialTheme.colorScheme.primary&#10;                    )&#10;                }&#10;                IconButton(onClick = onDeleteClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Delete,&#10;                        contentDescription = &quot;Hapus&quot;,&#10;                        tint = MaterialTheme.colorScheme.error&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun EmptyCategoriesState(&#10;    onAddClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.Category,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(80.dp),&#10;            tint = MaterialTheme.colorScheme.outline&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;        Text(&#10;            text = &quot;Belum ada kategori&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;&#10;        Text(&#10;            text = &quot;Tambahkan kategori untuk mengorganisir produk&quot;,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;&#10;        Spacer(modifier = Modifier.height(24.dp))&#10;&#10;        Button(onClick = onAddClick) {&#10;            Icon(Icons.Default.Add, contentDescription = null)&#10;            Spacer(modifier = Modifier.width(8.dp))&#10;            Text(&quot;Tambah Kategori&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun CategoryFormDialog(&#10;    isEdit: Boolean,&#10;    name: String,&#10;    description: String,&#10;    color: String,&#10;    icon: String,&#10;    nameError: String?,&#10;    isSaving: Boolean = false,&#10;    onNameChange: (String) -&gt; Unit,&#10;    onDescriptionChange: (String) -&gt; Unit,&#10;    onColorChange: (String) -&gt; Unit,&#10;    onIconChange: (String) -&gt; Unit,&#10;    onSave: () -&gt; Unit,&#10;    onDismiss: () -&gt; Unit&#10;) {&#10;    val predefinedIcons = listOf(&quot;&quot;, &quot;&quot;, &quot;☕&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)&#10;    val predefinedColors = listOf(&#10;        &quot;#6200EE&quot;, &quot;#03DAC5&quot;, &quot;#FF0266&quot;, &quot;#00C853&quot;,&#10;        &quot;#FF6D00&quot;, &quot;#2196F3&quot;, &quot;#E91E63&quot;, &quot;#9C27B0&quot;&#10;    )&#10;&#10;    var selectedIconIndex by remember { mutableStateOf(predefinedIcons.indexOf(icon).takeIf { it &gt;= 0 } ?: 0) }&#10;    var selectedColorIndex by remember { mutableStateOf(predefinedColors.indexOf(color).takeIf { it &gt;= 0 } ?: 0) }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(if (isEdit) &quot;Edit Kategori&quot; else &quot;Tambah Kategori&quot;) },&#10;        text = {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                OutlinedTextField(&#10;                    value = name,&#10;                    onValueChange = onNameChange,&#10;                    label = { Text(&quot;Nama Kategori&quot;) },&#10;                    isError = nameError != null,&#10;                    supportingText = nameError?.let { { Text(it) } },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    singleLine = true&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = description,&#10;                    onValueChange = onDescriptionChange,&#10;                    label = { Text(&quot;Deskripsi&quot;) },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    maxLines = 3&#10;                )&#10;&#10;                // Icon Selection&#10;                Text(&quot;Pilih Icon&quot;, style = MaterialTheme.typography.labelMedium)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                ) {&#10;                    predefinedIcons.forEachIndexed { index, iconEmoji -&gt;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .size(48.dp)&#10;                                .clip(RoundedCornerShape(8.dp))&#10;                                .background(&#10;                                    if (index == selectedIconIndex)&#10;                                        MaterialTheme.colorScheme.primaryContainer&#10;                                    else&#10;                                        MaterialTheme.colorScheme.surfaceVariant&#10;                                )&#10;                                .clickable {&#10;                                    selectedIconIndex = index&#10;                                    onIconChange(iconEmoji)&#10;                                },&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Text(text = iconEmoji, style = MaterialTheme.typography.titleMedium)&#10;                        }&#10;                    }&#10;                }&#10;&#10;                // Color Selection&#10;                Text(&quot;Pilih Warna&quot;, style = MaterialTheme.typography.labelMedium)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                ) {&#10;                    predefinedColors.forEachIndexed { index, colorHex -&gt;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .size(48.dp)&#10;                                .clip(CircleShape)&#10;                                .background(Color(android.graphics.Color.parseColor(colorHex)))&#10;                                .clickable {&#10;                                    selectedColorIndex = index&#10;                                    onColorChange(colorHex)&#10;                                }&#10;                        ) {&#10;                            if (index == selectedColorIndex) {&#10;                                Icon(&#10;                                    imageVector = Icons.Default.Check,&#10;                                    contentDescription = null,&#10;                                    tint = Color.White,&#10;                                    modifier = Modifier.align(Alignment.Center)&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            Button(&#10;                onClick = onSave,&#10;                enabled = !isSaving&#10;            ) {&#10;                if (isSaving) {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.size(16.dp),&#10;                        strokeWidth = 2.dp,&#10;                        color = MaterialTheme.colorScheme.onPrimary&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                }&#10;                Text(if (isSaving) &quot;Menyimpan...&quot; else &quot;Simpan&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(&#10;                onClick = onDismiss,&#10;                enabled = !isSaving&#10;            ) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/docs/FIX_CATEGORY_REALTIME_UPDATE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/docs/FIX_CATEGORY_REALTIME_UPDATE.md" />
              <option name="updatedContent" value="# Fix: Kategori Baru Tidak Muncul Langsung&#10;&#10;## Masalah&#10;Setelah menyimpan kategori baru di halaman &quot;Kelola Kategori&quot;, kategori tidak langsung terlihat di:&#10;1. Halaman Kelola Kategori sendiri&#10;2. Dropdown kategori di form tambah/edit produk&#10;&#10;## Penyebab&#10;Ada dua masalah utama:&#10;&#10;### 1. Implementasi Snackbar Yang Salah&#10;```kotlin&#10;// SEBELUM (SALAH)&#10;snackbarHost = {&#10;    if (uiState.error != null) {&#10;        Snackbar(...) { ... }&#10;    }&#10;    if (uiState.successMessage != null) {&#10;        Snackbar(...) { ... }&#10;    }&#10;}&#10;```&#10;&#10;**Masalah:**&#10;- Parameter `snackbarHost` dari Scaffold menerima composable `SnackbarHost`, BUKAN kondisional Snackbar&#10;- Implementasi yang salah bisa menyebabkan masalah rendering dan timing&#10;&#10;### 2. SaveCategoryUseCase Logic Error&#10;```kotlin&#10;// SEBELUM (SALAH)&#10;suspend operator fun invoke(category: Category) {&#10;    if (category.id.isEmpty()) {&#10;        productRepository.insertCategory(category)&#10;    } else {&#10;        productRepository.updateCategory(category)&#10;    }&#10;}&#10;```&#10;&#10;**Masalah:**&#10;- ViewModel selalu membuat UUID baru untuk kategori: `UUID.randomUUID().toString()`&#10;- Jadi `category.id` tidak pernah kosong&#10;- Use case selalu memanggil `updateCategory` bahkan untuk kategori baru&#10;- Bisa menyebabkan masalah jika kategori tidak ada di database&#10;&#10;## Solusi&#10;&#10;### 1. Perbaiki Snackbar Implementation (Best Practice)&#10;```kotlin&#10;// SESUDAH (BENAR)&#10;@Composable&#10;fun CategoryManagementScreen(...) {&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    &#10;    // Handle error messages&#10;    LaunchedEffect(uiState.error) {&#10;        uiState.error?.let { message -&gt;&#10;            snackbarHostState.showSnackbar(&#10;                message = message,&#10;                duration = SnackbarDuration.Long&#10;            )&#10;            viewModel.onEvent(CategoryManagementUiEvent.DismissError)&#10;        }&#10;    }&#10;    &#10;    // Handle success messages&#10;    LaunchedEffect(uiState.successMessage) {&#10;        uiState.successMessage?.let { message -&gt;&#10;            snackbarHostState.showSnackbar(&#10;                message = message,&#10;                duration = SnackbarDuration.Short&#10;            )&#10;            viewModel.onEvent(CategoryManagementUiEvent.DismissSuccess)&#10;        }&#10;    }&#10;    &#10;    Scaffold(&#10;        snackbarHost = {&#10;            SnackbarHost(hostState = snackbarHostState)&#10;        }&#10;    ) { ... }&#10;}&#10;```&#10;&#10;**Keuntungan:**&#10;- Menggunakan `SnackbarHostState` yang merupakan state holder resmi dari Material3&#10;- `showSnackbar()` adalah suspend function yang menunggu hingga Snackbar selesai ditampilkan&#10;- Auto-dismiss setelah duration selesai&#10;- Lebih reliable dan mengikuti best practice Material3&#10;&#10;### 2. Simplify SaveCategoryUseCase (Upsert Pattern)&#10;```kotlin&#10;// SESUDAH (BENAR)&#10;class SaveCategoryUseCase @Inject constructor(&#10;    private val productRepository: ProductRepository&#10;) {&#10;    suspend operator fun invoke(category: Category) {&#10;        // Room's @Insert with OnConflictStrategy.REPLACE handles both insert and update&#10;        productRepository.insertCategory(category)&#10;    }&#10;}&#10;```&#10;&#10;**Keuntungan:**&#10;- Menggunakan Room's `OnConflictStrategy.REPLACE` yang sudah di-set di DAO&#10;- Room otomatis mendeteksi: jika ID ada → update, jika tidak → insert&#10;- Lebih sederhana dan tidak ada kondisi yang bisa salah&#10;- Mengikuti &quot;Upsert&quot; pattern yang merupakan best practice&#10;&#10;## Bagaimana Reactive Flow Bekerja&#10;&#10;### Arsitektur Data Flow&#10;```&#10;┌─────────────────────────────────────────────────────────┐&#10;│  CategoryDao (Room)                                      │&#10;│  @Query(&quot;SELECT * FROM categories ...&quot;)                 │&#10;│  fun getAllCategories(): Flow&lt;List&lt;CategoryEntity&gt;&gt;     │&#10;└────────────────────┬────────────────────────────────────┘&#10;                     │ Flow emits automatically&#10;                     │ when database changes&#10;                     ▼&#10;┌─────────────────────────────────────────────────────────┐&#10;│  ProductRepository                                       │&#10;│  fun getAllCategories(): Flow&lt;List&lt;Category&gt;&gt; {         │&#10;│      return categoryDao.getAllCategories()              │&#10;│          .map { it.map { entity -&gt; entity.toDomain() }} │&#10;│  }                                                       │&#10;└────────────────────┬────────────────────────────────────┘&#10;                     │ Flow continues&#10;                     ▼&#10;┌─────────────────────────────────────────────────────────┐&#10;│  GetAllCategoriesUseCase                                │&#10;│  operator fun invoke(): Flow&lt;List&lt;Category&gt;&gt; {          │&#10;│      return productRepository.getAllCategories()        │&#10;│  }                                                       │&#10;└────────────────────┬────────────────────────────────────┘&#10;                     │ Flow consumed by multiple ViewModels&#10;                     ▼&#10;        ┌────────────┴────────────┐&#10;        ▼                         ▼&#10;┌──────────────────┐    ┌──────────────────────┐&#10;│ CategoryMgmt     │    │ ProductFormViewModel │&#10;│ ViewModel        │    │ &amp; ProductListVM      │&#10;│                  │    │                      │&#10;│ init {           │    │ init {               │&#10;│   getAllCats()   │    │   loadCategories()   │&#10;│   .collect {...} │    │   .collect {...}     │&#10;│ }                │    │ }                    │&#10;└──────────────────┘    └──────────────────────┘&#10;```&#10;&#10;### Flow Update Sequence&#10;```&#10;1. User clicks &quot;Simpan&quot; kategori baru&#10;   └─&gt; ViewModel.saveCategory()&#10;&#10;2. SaveCategoryUseCase dipanggil&#10;   └─&gt; Repository.insertCategory()&#10;   &#10;3. Room DAO insert ke database&#10;   └─&gt; CategoryDao.insertCategory()&#10;   &#10;4. Room detects database change&#10;   └─&gt; Automatically triggers Flow emission&#10;   &#10;5. Flow emits ke semua collectors&#10;   ├─&gt; CategoryManagementViewModel → UI updates ✅&#10;   ├─&gt; ProductFormViewModel → Dropdown updates ✅&#10;   └─&gt; ProductListViewModel → Filter updates ✅&#10;   &#10;6. Snackbar shows success message&#10;   └─&gt; After SnackbarDuration.Short, auto-dismisses&#10;   &#10;7. User sees updated list IMMEDIATELY&#10;   └─&gt; No need to refresh or navigate away&#10;```&#10;&#10;## Testing&#10;&#10;### Scenario 1: Dari Product List&#10;```&#10;1. Buka &quot;Daftar Produk&quot;&#10;2. Klik tombol &quot;Kelola Kategori&quot; (icon Category di toolbar)&#10;3. Klik FAB &quot;+&quot; untuk tambah kategori&#10;4. Isi form:&#10;   - Nama: &quot;Minuman&quot;&#10;   - Deskripsi: &quot;Kategori minuman&quot;&#10;   - Pilih icon: ☕&#10;   - Pilih warna: biru&#10;5. Klik &quot;Simpan&quot;&#10;6. ✅ Snackbar muncul: &quot;Kategori berhasil ditambahkan&quot;&#10;7. ✅ Kategori &quot;Minuman&quot; LANGSUNG terlihat di daftar&#10;8. ✅ Tidak perlu klik &quot;OK&quot; atau refresh&#10;9. Klik back ke &quot;Daftar Produk&quot;&#10;10. Klik &quot;Tambah Produk&quot;&#10;11. ✅ Kategori &quot;Minuman&quot; SUDAH tersedia di dropdown&#10;```&#10;&#10;### Scenario 2: Dari Product Form&#10;```&#10;1. Buka &quot;Daftar Produk&quot;&#10;2. Klik &quot;Tambah Produk&quot;&#10;3. User kembali ke Product List&#10;4. Klik &quot;Kelola Kategori&quot;&#10;5. Tambah kategori baru &quot;Makanan&quot;&#10;6. ✅ Kategori langsung muncul di list&#10;7. Klik back ke Product List&#10;8. Klik &quot;Tambah Produk&quot; lagi&#10;9. ✅ Kategori &quot;Makanan&quot; tersedia di dropdown&#10;```&#10;&#10;## Best Practices Yang Diterapkan&#10;&#10;### 1. **Reactive Programming dengan Flow**&#10;- ✅ Single source of truth (database)&#10;- ✅ Automatic UI updates&#10;- ✅ No manual refresh needed&#10;&#10;### 2. **Material3 Snackbar Pattern**&#10;- ✅ Use SnackbarHostState&#10;- ✅ LaunchedEffect for side effects&#10;- ✅ Suspend function untuk timing control&#10;&#10;### 3. **Upsert Pattern**&#10;- ✅ Simplify insert/update logic&#10;- ✅ Let Room handle conflict resolution&#10;- ✅ OnConflictStrategy.REPLACE&#10;&#10;### 4. **Separation of Concerns**&#10;- ✅ ViewModel handles business logic&#10;- ✅ Use cases handle single responsibility&#10;- ✅ Repository abstracts data source&#10;&#10;### 5. **Error Handling**&#10;- ✅ Try-catch di ViewModel&#10;- ✅ User-friendly error messages&#10;- ✅ Snackbar untuk feedback&#10;&#10;## Files Modified&#10;&#10;1. **SaveCategoryUseCase.kt**&#10;   - Removed unnecessary if-else logic&#10;   - Use upsert pattern (always insertCategory)&#10;&#10;2. **CategoryManagementScreen.kt**&#10;   - Added SnackbarHostState&#10;   - Use LaunchedEffect for Snackbar display&#10;   - Proper Material3 Snackbar implementation&#10;&#10;## Kesimpulan&#10;&#10;Dengan perbaikan ini:&#10;- ✅ Kategori baru langsung muncul di halaman Kelola Kategori&#10;- ✅ Kategori baru langsung tersedia di dropdown form produk&#10;- ✅ Tidak perlu refresh manual&#10;- ✅ Snackbar feedback lebih reliable&#10;- ✅ Mengikuti Android best practices&#10;- ✅ Reactive programming bekerja dengan benar&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>