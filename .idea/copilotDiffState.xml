<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/users/ui/UsersManagementScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/users/ui/UsersManagementScreen.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.users.ui&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.material.icons.filled.Check&#10;import androidx.compose.material.icons.filled.Delete&#10;import androidx.compose.material.icons.filled.Edit&#10;import androidx.compose.material.icons.filled.LockReset&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material.icons.filled.ToggleOn&#10;import androidx.compose.material.icons.filled.Search&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun UsersManagementScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: UsersManagementViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    LaunchedEffect(uiState.errorMessage) {&#10;        uiState.errorMessage?.let {&#10;            snackbarHostState.showSnackbar(it)&#10;            viewModel.clearError()&#10;        }&#10;    }&#10;    LaunchedEffect(uiState.successMessage) {&#10;        uiState.successMessage?.let {&#10;            snackbarHostState.showSnackbar(it)&#10;            viewModel.clearSuccess()&#10;        }&#10;    }&#10;&#10;    val filteredUsers = remember(uiState.users, uiState.searchQuery, uiState.filterActive) {&#10;        uiState.users.filter { user -&gt;&#10;            val q = uiState.searchQuery.trim().lowercase()&#10;            val matchSearch = q.isEmpty() || user.name.lowercase().contains(q)&#10;            val matchFilter = when (uiState.filterActive) {&#10;                null -&gt; true&#10;                true -&gt; user.isActive&#10;                false -&gt; !user.isActive&#10;            }&#10;            matchSearch &amp;&amp; matchFilter&#10;        }&#10;    }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Manajemen Pengguna&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Kembali&quot;)&#10;                    }&#10;                },&#10;                actions = {&#10;                    IconButton(onClick = { viewModel.showAddDialog() }) {&#10;                        Icon(Icons.Default.Add, contentDescription = &quot;Tambah User&quot;)&#10;                    }&#10;                }&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) },&#10;        modifier = modifier&#10;    ) { padding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(padding)&#10;        ) {&#10;            if (uiState.isLoading) {&#10;                LinearProgressIndicator(modifier = Modifier.fillMaxWidth())&#10;            }&#10;&#10;            // Search Field&#10;            OutlinedTextField(&#10;                value = uiState.searchQuery,&#10;                onValueChange = viewModel::onSearchChange,&#10;                leadingIcon = { Icon(Icons.Default.Search, contentDescription = null) },&#10;                placeholder = { Text(&quot;Cari pengguna...&quot;) },&#10;                singleLine = true,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 16.dp, vertical = 8.dp)&#10;            )&#10;&#10;            // Filter Chips&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 16.dp),&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;            ) {&#10;                FilterChip(&#10;                    selected = uiState.filterActive == null,&#10;                    onClick = { viewModel.setFilterActive(null) },&#10;                    label = { Text(&quot;Semua&quot;) }&#10;                )&#10;                FilterChip(&#10;                    selected = uiState.filterActive == true,&#10;                    onClick = { viewModel.setFilterActive(true) },&#10;                    label = { Text(&quot;Aktif&quot;) }&#10;                )&#10;                FilterChip(&#10;                    selected = uiState.filterActive == false,&#10;                    onClick = { viewModel.setFilterActive(false) },&#10;                    label = { Text(&quot;Nonaktif&quot;) }&#10;                )&#10;            }&#10;&#10;            Spacer(Modifier.height(8.dp))&#10;&#10;            if (filteredUsers.isEmpty()) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Text(&quot;Tidak ada pengguna untuk filter saat ini&quot;)&#10;                }&#10;            } else {&#10;                LazyColumn(&#10;                    contentPadding = PaddingValues(16.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    items(filteredUsers, key = { it.id }) { user -&gt;&#10;                        ElevatedCard(modifier = Modifier.fillMaxWidth()) {&#10;                            Column(modifier = Modifier.padding(16.dp)) {&#10;                                Row(&#10;                                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    verticalAlignment = androidx.compose.ui.Alignment.CenterVertically&#10;                                ) {&#10;                                    Column(modifier = Modifier.weight(1f)) {&#10;                                        Row(verticalAlignment = androidx.compose.ui.Alignment.CenterVertically) {&#10;                                            Text(&#10;                                                user.name,&#10;                                                style = MaterialTheme.typography.titleMedium,&#10;                                                fontWeight = FontWeight.SemiBold&#10;                                            )&#10;                                            Spacer(Modifier.width(8.dp))&#10;                                            AssistChip(&#10;                                                onClick = {},&#10;                                                enabled = false,&#10;                                                label = { Text(if (user.isActive) &quot;Aktif&quot; else &quot;Nonaktif&quot;) },&#10;                                                colors = AssistChipDefaults.assistChipColors(&#10;                                                    containerColor = if (user.isActive) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.errorContainer,&#10;                                                    labelColor = if (user.isActive) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onErrorContainer&#10;                                                )&#10;                                            )&#10;                                        }&#10;                                        Text(user.role.displayName(), style = MaterialTheme.typography.bodySmall)&#10;                                        Text(&#10;                                            text = &quot;Dibuat: ${java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(java.util.Date(user.createdAt))}&quot;,&#10;                                            style = MaterialTheme.typography.labelSmall&#10;                                        )&#10;                                    }&#10;                                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                                        IconButton(onClick = { viewModel.requestToggleActive(user) }) {&#10;                                            Icon(&#10;                                                imageVector = Icons.Default.ToggleOn,&#10;                                                contentDescription = &quot;Ubah Status&quot;,&#10;                                                tint = if (user.isActive) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.outline&#10;                                            )&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.requestResetPin(user) }) {&#10;                                            Icon(Icons.Default.LockReset, contentDescription = &quot;Reset PIN&quot;)&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.requestDeleteUser(user) }) {&#10;                                            Icon(Icons.Default.Delete, contentDescription = &quot;Hapus User&quot;)&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.startEditUser(user) }) {&#10;                                            Icon(Icons.Default.Edit, contentDescription = &quot;Edit User&quot;)&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Add User Dialog&#10;    if (uiState.showAddDialog) {&#10;        AddUserDialog(&#10;            onDismiss = { viewModel.hideAddDialog() },&#10;            onSave = { username, name, role, pin -&gt; viewModel.addUser(username, name, role, pin) }&#10;        )&#10;    }&#10;&#10;    // Edit User Dialog&#10;    if (uiState.showEditDialog &amp;&amp; uiState.editingUser != null) {&#10;        AlertDialog(&#10;            onDismissRequest = { viewModel.dismissEditDialog() },&#10;            title = { Text(&quot;Edit Pengguna&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    OutlinedTextField(&#10;                        value = uiState.editUsername,&#10;                        onValueChange = viewModel::onEditUsernameChange,&#10;                        label = { Text(&quot;Username&quot;) },&#10;                        singleLine = true&#10;                    )&#10;                    OutlinedTextField(&#10;                        value = uiState.editName,&#10;                        onValueChange = viewModel::onEditNameChange,&#10;                        label = { Text(&quot;Nama&quot;) },&#10;                        singleLine = true&#10;                    )&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { viewModel.confirmEditUser() }) { Text(&quot;Simpan&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { viewModel.dismissEditDialog() }) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Reset PIN Dialog&#10;    if (uiState.showConfirmResetPin &amp;&amp; uiState.pendingActionUser != null) {&#10;        val user = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Reset PIN&quot;) },&#10;            text = { Text(&quot;Reset PIN pengguna '${user!!.name}' ke default?&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmResetPin) { Text(&quot;Reset&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Delete Dialog&#10;    if (uiState.showConfirmDelete &amp;&amp; uiState.pendingActionUser != null) {&#10;        val user = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Hapus Pengguna&quot;) },&#10;            text = { Text(&quot;Hapus pengguna '${user!!.name}'? Tindakan ini bersifat soft delete.&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmDeleteUser) { Text(&quot;Hapus&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Toggle Active Dialog&#10;    if (uiState.showConfirmToggleActive &amp;&amp; uiState.pendingActionUser != null) {&#10;        val target = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Ubah Status&quot;) },&#10;            text = { Text(&quot;Ubah status pengguna '${target!!.name}' menjadi ${if (target.isActive) &quot;Nonaktif&quot; else &quot;Aktif&quot;}?&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmToggleActive) { Text(&quot;Ubah&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RoleSelector(selectedRole: String, onSelect: (String) -&gt; Unit) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        FilterChip(&#10;            selected = selectedRole == &quot;ADMIN&quot;,&#10;            onClick = { onSelect(&quot;ADMIN&quot;) },&#10;            label = { Text(&quot;Admin&quot;) },&#10;            leadingIcon = if (selectedRole == &quot;ADMIN&quot;) { { Icon(Icons.Filled.Check, contentDescription = null) } } else null,&#10;            colors = FilterChipDefaults.filterChipColors(&#10;                containerColor = if (selectedRole == &quot;ADMIN&quot;) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.surfaceVariant,&#10;                labelColor = if (selectedRole == &quot;ADMIN&quot;) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                selectedContainerColor = MaterialTheme.colorScheme.primaryContainer&#10;            ),&#10;            border = FilterChipDefaults.filterChipBorder(borderColor = if (selectedRole == &quot;ADMIN&quot;) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.outlineVariant)&#10;        )&#10;        FilterChip(&#10;            selected = selectedRole == &quot;CASHIER&quot;,&#10;            onClick = { onSelect(&quot;CASHIER&quot;) },&#10;            label = { Text(&quot;Kasir&quot;) },&#10;            leadingIcon = if (selectedRole == &quot;CASHIER&quot;) { { Icon(Icons.Filled.Check, contentDescription = null) } } else null,&#10;            colors = FilterChipDefaults.filterChipColors(&#10;                containerColor = if (selectedRole == &quot;CASHIER&quot;) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.surfaceVariant,&#10;                labelColor = if (selectedRole == &quot;CASHIER&quot;) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                selectedContainerColor = MaterialTheme.colorScheme.primaryContainer&#10;            ),&#10;            border = FilterChipDefaults.filterChipBorder(borderColor = if (selectedRole == &quot;CASHIER&quot;) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.outlineVariant)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun AddUserDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onSave: (String, String, String, String) -&gt; Unit&#10;) {&#10;    var username by remember { mutableStateOf(&quot;&quot;) }&#10;    var name by remember { mutableStateOf(&quot;&quot;) }&#10;    var role by remember { mutableStateOf(&quot;CASHIER&quot;) }&#10;    var pin by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(&quot;Tambah Pengguna&quot;) },&#10;        text = {&#10;            Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                OutlinedTextField(&#10;                    value = username,&#10;                    onValueChange = { username = it.trim() },&#10;                    label = { Text(&quot;Username&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.Person, contentDescription = null) },&#10;                    singleLine = true&#10;                )&#10;                OutlinedTextField(&#10;                    value = name,&#10;                    onValueChange = { name = it },&#10;                    label = { Text(&quot;Nama&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.Person, contentDescription = null) },&#10;                    singleLine = true&#10;                )&#10;                OutlinedTextField(&#10;                    value = pin,&#10;                    onValueChange = { pin = it.filter { ch -&gt; ch.isDigit() } },&#10;                    label = { Text(&quot;PIN (4-6 digit)&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.LockReset, contentDescription = null) },&#10;                    singleLine = true,&#10;                    visualTransformation = PasswordVisualTransformation(),&#10;                    keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number)&#10;                )&#10;                Text(&quot;Pilih Peran&quot;, style = MaterialTheme.typography.labelMedium)&#10;                RoleSelector(selectedRole = role, onSelect = { role = it })&#10;            }&#10;        },&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = { onSave(username, name, role, pin) },&#10;                enabled = username.isNotBlank() &amp;&amp; name.isNotBlank() &amp;&amp; pin.length in 4..6&#10;            ) { Text(&quot;Simpan&quot;) }&#10;        },&#10;        dismissButton = { TextButton(onClick = onDismiss) { Text(&quot;Batal&quot;) } }&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.users.ui&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.material.icons.filled.Check&#10;import androidx.compose.material.icons.filled.Delete&#10;import androidx.compose.material.icons.filled.Edit&#10;import androidx.compose.material.icons.filled.LockReset&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material.icons.filled.ToggleOn&#10;import androidx.compose.material.icons.filled.Search&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun UsersManagementScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: UsersManagementViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    LaunchedEffect(uiState.errorMessage) {&#10;        uiState.errorMessage?.let {&#10;            snackbarHostState.showSnackbar(it)&#10;            viewModel.clearError()&#10;        }&#10;    }&#10;    LaunchedEffect(uiState.successMessage) {&#10;        uiState.successMessage?.let {&#10;            snackbarHostState.showSnackbar(it)&#10;            viewModel.clearSuccess()&#10;        }&#10;    }&#10;&#10;    val filteredUsers = remember(uiState.users, uiState.searchQuery, uiState.filterActive) {&#10;        uiState.users.filter { user -&gt;&#10;            val q = uiState.searchQuery.trim().lowercase()&#10;            val matchSearch = q.isEmpty() || user.name.lowercase().contains(q)&#10;            val matchFilter = when (uiState.filterActive) {&#10;                null -&gt; true&#10;                true -&gt; user.isActive&#10;                false -&gt; !user.isActive&#10;            }&#10;            matchSearch &amp;&amp; matchFilter&#10;        }&#10;    }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Manajemen Pengguna&quot;) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Kembali&quot;)&#10;                    }&#10;                },&#10;                actions = {&#10;                    IconButton(onClick = { viewModel.showAddDialog() }) {&#10;                        Icon(Icons.Default.Add, contentDescription = &quot;Tambah User&quot;)&#10;                    }&#10;                }&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) },&#10;        modifier = modifier&#10;    ) { padding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(padding)&#10;        ) {&#10;            if (uiState.isLoading) {&#10;                LinearProgressIndicator(modifier = Modifier.fillMaxWidth())&#10;            }&#10;&#10;            // Search Field&#10;            OutlinedTextField(&#10;                value = uiState.searchQuery,&#10;                onValueChange = viewModel::onSearchChange,&#10;                leadingIcon = { Icon(Icons.Default.Search, contentDescription = null) },&#10;                placeholder = { Text(&quot;Cari pengguna...&quot;) },&#10;                singleLine = true,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 16.dp, vertical = 8.dp)&#10;            )&#10;&#10;            // Filter Chips&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 16.dp),&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;            ) {&#10;                FilterChip(&#10;                    selected = uiState.filterActive == null,&#10;                    onClick = { viewModel.setFilterActive(null) },&#10;                    label = { Text(&quot;Semua&quot;) }&#10;                )&#10;                FilterChip(&#10;                    selected = uiState.filterActive == true,&#10;                    onClick = { viewModel.setFilterActive(true) },&#10;                    label = { Text(&quot;Aktif&quot;) }&#10;                )&#10;                FilterChip(&#10;                    selected = uiState.filterActive == false,&#10;                    onClick = { viewModel.setFilterActive(false) },&#10;                    label = { Text(&quot;Nonaktif&quot;) }&#10;                )&#10;            }&#10;&#10;            Spacer(Modifier.height(8.dp))&#10;&#10;            if (filteredUsers.isEmpty()) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Text(&quot;Tidak ada pengguna untuk filter saat ini&quot;)&#10;                }&#10;            } else {&#10;                LazyColumn(&#10;                    contentPadding = PaddingValues(16.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    items(filteredUsers, key = { it.id }) { user -&gt;&#10;                        ElevatedCard(modifier = Modifier.fillMaxWidth()) {&#10;                            Column(modifier = Modifier.padding(16.dp)) {&#10;                                Row(&#10;                                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                                    modifier = Modifier.fillMaxWidth(),&#10;                                    verticalAlignment = Alignment.CenterVertically&#10;                                ) {&#10;                                    Column(modifier = Modifier.weight(1f)) {&#10;                                        Row(verticalAlignment = Alignment.CenterVertically) {&#10;                                            Text(&#10;                                                user.name,&#10;                                                style = MaterialTheme.typography.titleMedium,&#10;                                                fontWeight = FontWeight.SemiBold&#10;                                            )&#10;                                            Spacer(Modifier.width(8.dp))&#10;                                            AssistChip(&#10;                                                onClick = {},&#10;                                                enabled = false,&#10;                                                label = { Text(if (user.isActive) &quot;Aktif&quot; else &quot;Nonaktif&quot;) },&#10;                                                colors = AssistChipDefaults.assistChipColors(&#10;                                                    containerColor = if (user.isActive) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.errorContainer,&#10;                                                    labelColor = if (user.isActive) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onErrorContainer&#10;                                                )&#10;                                            )&#10;                                        }&#10;                                        Text(user.role.displayName(), style = MaterialTheme.typography.bodySmall)&#10;                                        Text(&#10;                                            text = &quot;Dibuat: ${java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(java.util.Date(user.createdAt))}&quot;,&#10;                                            style = MaterialTheme.typography.labelSmall&#10;                                        )&#10;                                    }&#10;                                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                                        IconButton(onClick = { viewModel.requestToggleActive(user) }) {&#10;                                            Icon(&#10;                                                imageVector = Icons.Default.ToggleOn,&#10;                                                contentDescription = &quot;Ubah Status&quot;,&#10;                                                tint = if (user.isActive) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.outline&#10;                                            )&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.requestResetPin(user) }) {&#10;                                            Icon(Icons.Default.LockReset, contentDescription = &quot;Reset PIN&quot;)&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.requestDeleteUser(user) }) {&#10;                                            Icon(Icons.Default.Delete, contentDescription = &quot;Hapus User&quot;)&#10;                                        }&#10;                                        IconButton(onClick = { viewModel.startEditUser(user) }) {&#10;                                            Icon(Icons.Default.Edit, contentDescription = &quot;Edit User&quot;)&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Add User Dialog&#10;    if (uiState.showAddDialog) {&#10;        AddUserDialog(&#10;            onDismiss = { viewModel.hideAddDialog() },&#10;            onSave = { username, name, role, pin -&gt; viewModel.addUser(username, name, role, pin) }&#10;        )&#10;    }&#10;&#10;    // Edit User Dialog&#10;    if (uiState.showEditDialog &amp;&amp; uiState.editingUser != null) {&#10;        AlertDialog(&#10;            onDismissRequest = { viewModel.dismissEditDialog() },&#10;            title = { Text(&quot;Edit Pengguna&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    OutlinedTextField(&#10;                        value = uiState.editUsername,&#10;                        onValueChange = viewModel::onEditUsernameChange,&#10;                        label = { Text(&quot;Username&quot;) },&#10;                        singleLine = true&#10;                    )&#10;                    OutlinedTextField(&#10;                        value = uiState.editName,&#10;                        onValueChange = viewModel::onEditNameChange,&#10;                        label = { Text(&quot;Nama&quot;) },&#10;                        singleLine = true&#10;                    )&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { viewModel.confirmEditUser() }) { Text(&quot;Simpan&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { viewModel.dismissEditDialog() }) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Reset PIN Dialog&#10;    if (uiState.showConfirmResetPin &amp;&amp; uiState.pendingActionUser != null) {&#10;        val user = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Reset PIN&quot;) },&#10;            text = { Text(&quot;Reset PIN pengguna '${user!!.name}' ke default?&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmResetPin) { Text(&quot;Reset&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Delete Dialog&#10;    if (uiState.showConfirmDelete &amp;&amp; uiState.pendingActionUser != null) {&#10;        val user = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Hapus Pengguna&quot;) },&#10;            text = { Text(&quot;Hapus pengguna '${user!!.name}'? Tindakan ini bersifat soft delete.&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmDeleteUser) { Text(&quot;Hapus&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Confirm Toggle Active Dialog&#10;    if (uiState.showConfirmToggleActive &amp;&amp; uiState.pendingActionUser != null) {&#10;        val target = uiState.pendingActionUser&#10;        AlertDialog(&#10;            onDismissRequest = viewModel::dismissDialogs,&#10;            title = { Text(&quot;Ubah Status&quot;) },&#10;            text = { Text(&quot;Ubah status pengguna '${target!!.name}' menjadi ${if (target.isActive) &quot;Nonaktif&quot; else &quot;Aktif&quot;}?&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = viewModel::confirmToggleActive) { Text(&quot;Ubah&quot;) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = viewModel::dismissDialogs) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RoleSelector(selectedRole: String, onSelect: (String) -&gt; Unit) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        FilterChip(&#10;            selected = selectedRole == &quot;ADMIN&quot;,&#10;            onClick = { onSelect(&quot;ADMIN&quot;) },&#10;            label = { Text(&quot;Admin&quot;) },&#10;            leadingIcon = if (selectedRole == &quot;ADMIN&quot;) { { Icon(Icons.Filled.Check, contentDescription = null) } } else null,&#10;            colors = FilterChipDefaults.filterChipColors(&#10;                containerColor = if (selectedRole == &quot;ADMIN&quot;) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.surfaceVariant,&#10;                labelColor = if (selectedRole == &quot;ADMIN&quot;) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                selectedContainerColor = MaterialTheme.colorScheme.primaryContainer&#10;            )&#10;        )&#10;        FilterChip(&#10;            selected = selectedRole == &quot;CASHIER&quot;,&#10;            onClick = { onSelect(&quot;CASHIER&quot;) },&#10;            label = { Text(&quot;Kasir&quot;) },&#10;            leadingIcon = if (selectedRole == &quot;CASHIER&quot;) { { Icon(Icons.Filled.Check, contentDescription = null) } } else null,&#10;            colors = FilterChipDefaults.filterChipColors(&#10;                containerColor = if (selectedRole == &quot;CASHIER&quot;) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.surfaceVariant,&#10;                labelColor = if (selectedRole == &quot;CASHIER&quot;) MaterialTheme.colorScheme.onPrimaryContainer else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                selectedContainerColor = MaterialTheme.colorScheme.primaryContainer&#10;            )&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun AddUserDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onSave: (String, String, String, String) -&gt; Unit&#10;) {&#10;    var username by remember { mutableStateOf(&quot;&quot;) }&#10;    var name by remember { mutableStateOf(&quot;&quot;) }&#10;    var role by remember { mutableStateOf(&quot;CASHIER&quot;) }&#10;    var pin by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(&quot;Tambah Pengguna&quot;) },&#10;        text = {&#10;            Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                OutlinedTextField(&#10;                    value = username,&#10;                    onValueChange = { username = it.trim() },&#10;                    label = { Text(&quot;Username&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.Person, contentDescription = null) },&#10;                    singleLine = true&#10;                )&#10;                OutlinedTextField(&#10;                    value = name,&#10;                    onValueChange = { name = it },&#10;                    label = { Text(&quot;Nama&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.Person, contentDescription = null) },&#10;                    singleLine = true&#10;                )&#10;                OutlinedTextField(&#10;                    value = pin,&#10;                    onValueChange = { pin = it.filter { ch -&gt; ch.isDigit() } },&#10;                    label = { Text(&quot;PIN (4-6 digit)&quot;) },&#10;                    leadingIcon = { Icon(Icons.Default.LockReset, contentDescription = null) },&#10;                    singleLine = true,&#10;                    visualTransformation = PasswordVisualTransformation(),&#10;                    keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number)&#10;                )&#10;                Text(&quot;Pilih Peran&quot;, style = MaterialTheme.typography.labelMedium)&#10;                RoleSelector(selectedRole = role, onSelect = { role = it })&#10;            }&#10;        },&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = { onSave(username, name, role, pin) },&#10;                enabled = username.isNotBlank() &amp;&amp; name.isNotBlank() &amp;&amp; pin.length in 4..6&#10;            ) { Text(&quot;Simpan&quot;) }&#10;        },&#10;        dismissButton = { TextButton(onClick = onDismiss) { Text(&quot;Batal&quot;) } }&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>