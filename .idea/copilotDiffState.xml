<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/components/ProductFilterDialog.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/components/ProductFilterDialog.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.product.ui.components&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.selection.selectable&#10;import androidx.compose.foundation.selection.selectableGroup&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.semantics.Role&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.unit.dp&#10;import id.stargan.intikasir.domain.model.Category&#10;import id.stargan.intikasir.feature.product.domain.model.ProductFilter&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.TextButton&#10;&#10;/**&#10; * Filter Dialog untuk product list&#10; */&#10;@Composable&#10;fun ProductFilterDialog(&#10;    currentFilter: ProductFilter,&#10;    categories: List&lt;Category&gt;,&#10;    onFilterChanged: (ProductFilter) -&gt; Unit,&#10;    onDismiss: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var selectedCategoryId by remember { mutableStateOf(currentFilter.categoryId) }&#10;    var inStockOnly by remember { mutableStateOf(currentFilter.inStockOnly) }&#10;    var lowStockOnly by remember { mutableStateOf(currentFilter.lowStockOnly) }&#10;    var activeOnly by remember { mutableStateOf(currentFilter.activeOnly) }&#10;    var categorySearch by remember { mutableStateOf(&quot;&quot;) }&#10;    var showCategories by remember { mutableStateOf(true) }&#10;&#10;    val filteredCategories = remember(categorySearch, categories) {&#10;        if (categorySearch.isBlank()) categories else categories.filter { it.name.contains(categorySearch, ignoreCase = true) }&#10;    }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(&quot;Filter Produk&quot;) },&#10;        text = {&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(vertical = 8.dp),&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                // Category Filter&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(text = &quot;Kategori&quot;, style = MaterialTheme.typography.titleSmall)&#10;                    TextButton(onClick = { showCategories = !showCategories }) {&#10;                        Text(if (showCategories) &quot;Sembunyikan&quot; else &quot;Tampilkan&quot;)&#10;                    }&#10;                }&#10;                if (showCategories) {&#10;                    OutlinedTextField(&#10;                        value = categorySearch,&#10;                        onValueChange = { categorySearch = it },&#10;                        placeholder = { Text(&quot;Cari kategori...&quot;) },&#10;                        singleLine = true,&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Text)&#10;                    )&#10;                    Spacer(Modifier.height(8.dp))&#10;                    // Category list scrollable with max height&#10;                    LazyColumn(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .heightIn(max = 240.dp)&#10;                            .selectableGroup(),&#10;                        verticalArrangement = Arrangement.spacedBy(0.dp)&#10;                    ) {&#10;                        item {&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .selectable(&#10;                                        selected = selectedCategoryId == null,&#10;                                        onClick = { selectedCategoryId = null },&#10;                                        role = Role.RadioButton&#10;                                    )&#10;                                    .padding(vertical = 8.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                RadioButton(selected = selectedCategoryId == null, onClick = null)&#10;                                Spacer(Modifier.width(8.dp))&#10;                                Text(&quot;Semua Kategori&quot;)&#10;                            }&#10;                        }&#10;                        items(filteredCategories, key = { it.id }) { category -&gt;&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .selectable(&#10;                                        selected = selectedCategoryId == category.id,&#10;                                        onClick = { selectedCategoryId = category.id },&#10;                                        role = Role.RadioButton&#10;                                    )&#10;                                    .padding(vertical = 8.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                RadioButton(selected = selectedCategoryId == category.id, onClick = null)&#10;                                Spacer(Modifier.width(8.dp))&#10;                                Text(category.name)&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;&#10;                HorizontalDivider()&#10;&#10;                // Stock Filters&#10;                Text(text = &quot;Stok&quot;, style = MaterialTheme.typography.titleSmall)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = inStockOnly, onCheckedChange = { inStockOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Hanya yang tersedia&quot;)&#10;                }&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = lowStockOnly, onCheckedChange = { lowStockOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Stok menipis&quot;)&#10;                }&#10;&#10;                HorizontalDivider()&#10;&#10;                // Active Filter&#10;                Text(text = &quot;Status&quot;, style = MaterialTheme.typography.titleSmall)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = activeOnly, onCheckedChange = { activeOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Hanya produk aktif&quot;)&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            TextButton(onClick = {&#10;                onFilterChanged(&#10;                    ProductFilter(&#10;                        categoryId = selectedCategoryId,&#10;                        inStockOnly = inStockOnly,&#10;                        lowStockOnly = lowStockOnly,&#10;                        activeOnly = activeOnly&#10;                    )&#10;                )&#10;                onDismiss()&#10;            }) { Text(&quot;Terapkan&quot;) }&#10;        },&#10;        dismissButton = { TextButton(onClick = onDismiss) { Text(&quot;Batal&quot;) } },&#10;        modifier = modifier&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.product.ui.components&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.selection.selectable&#10;import androidx.compose.foundation.selection.selectableGroup&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.semantics.Role&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.unit.dp&#10;import id.stargan.intikasir.domain.model.Category&#10;import id.stargan.intikasir.feature.product.domain.model.ProductFilter&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.TextButton&#10;&#10;/**&#10; * Filter Dialog untuk product list&#10; */&#10;@Composable&#10;fun ProductFilterDialog(&#10;    currentFilter: ProductFilter,&#10;    categories: List&lt;Category&gt;,&#10;    onFilterChanged: (ProductFilter) -&gt; Unit,&#10;    onDismiss: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var selectedCategoryId by remember { mutableStateOf(currentFilter.categoryId) }&#10;    var inStockOnly by remember { mutableStateOf(currentFilter.inStockOnly) }&#10;    var lowStockOnly by remember { mutableStateOf(currentFilter.lowStockOnly) }&#10;    var activeOnly by remember { mutableStateOf(currentFilter.activeOnly) }&#10;    var categorySearch by remember { mutableStateOf(&quot;&quot;) }&#10;    var showCategories by remember { mutableStateOf(true) }&#10;    var minPriceText by remember { mutableStateOf(currentFilter.minPrice?.toInt()?.toString() ?: &quot;&quot;) }&#10;    var maxPriceText by remember { mutableStateOf(currentFilter.maxPrice?.toInt()?.toString() ?: &quot;&quot;) }&#10;&#10;    val filteredCategories = remember(categorySearch, categories) {&#10;        if (categorySearch.isBlank()) categories else categories.filter { it.name.contains(categorySearch, ignoreCase = true) }&#10;    }&#10;&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        title = { Text(&quot;Filter Produk&quot;) },&#10;        text = {&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(vertical = 8.dp),&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                // Category Filter&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(text = &quot;Kategori&quot;, style = MaterialTheme.typography.titleSmall)&#10;                    TextButton(onClick = { showCategories = !showCategories }) {&#10;                        Text(if (showCategories) &quot;Sembunyikan&quot; else &quot;Tampilkan&quot;)&#10;                    }&#10;                }&#10;                if (showCategories) {&#10;                    OutlinedTextField(&#10;                        value = categorySearch,&#10;                        onValueChange = { categorySearch = it },&#10;                        placeholder = { Text(&quot;Cari kategori...&quot;) },&#10;                        singleLine = true,&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Text)&#10;                    )&#10;                    Spacer(Modifier.height(8.dp))&#10;                    // Category list scrollable with max height&#10;                    LazyColumn(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .heightIn(max = 240.dp)&#10;                            .selectableGroup(),&#10;                        verticalArrangement = Arrangement.spacedBy(0.dp)&#10;                    ) {&#10;                        item {&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .selectable(&#10;                                        selected = selectedCategoryId == null,&#10;                                        onClick = { selectedCategoryId = null },&#10;                                        role = Role.RadioButton&#10;                                    )&#10;                                    .padding(vertical = 8.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                RadioButton(selected = selectedCategoryId == null, onClick = null)&#10;                                Spacer(Modifier.width(8.dp))&#10;                                Text(&quot;Semua Kategori&quot;)&#10;                            }&#10;                        }&#10;                        items(filteredCategories, key = { it.id }) { category -&gt;&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .selectable(&#10;                                        selected = selectedCategoryId == category.id,&#10;                                        onClick = { selectedCategoryId = category.id },&#10;                                        role = Role.RadioButton&#10;                                    )&#10;                                    .padding(vertical = 8.dp),&#10;                                verticalAlignment = Alignment.CenterVertically&#10;                            ) {&#10;                                RadioButton(selected = selectedCategoryId == category.id, onClick = null)&#10;                                Spacer(Modifier.width(8.dp))&#10;                                Text(category.name)&#10;                            }&#10;                        }&#10;                    }&#10;                }&#10;&#10;                HorizontalDivider()&#10;&#10;                // Stock Filters&#10;                Text(text = &quot;Stok&quot;, style = MaterialTheme.typography.titleSmall)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = inStockOnly, onCheckedChange = { inStockOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Hanya yang tersedia&quot;)&#10;                }&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = lowStockOnly, onCheckedChange = { lowStockOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Stok menipis&quot;)&#10;                }&#10;&#10;                HorizontalDivider()&#10;&#10;                // Active Filter&#10;                Text(text = &quot;Status&quot;, style = MaterialTheme.typography.titleSmall)&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Checkbox(checked = activeOnly, onCheckedChange = { activeOnly = it })&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&quot;Hanya produk aktif&quot;)&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            TextButton(onClick = {&#10;                val minPrice = minPriceText.toDoubleOrNull()&#10;                val maxPrice = maxPriceText.toDoubleOrNull()&#10;                &#10;                onFilterChanged(&#10;                    ProductFilter(&#10;                        categoryId = selectedCategoryId,&#10;                        inStockOnly = inStockOnly,&#10;                        lowStockOnly = lowStockOnly,&#10;                        activeOnly = activeOnly,&#10;                        minPrice = minPrice,&#10;                        maxPrice = maxPrice&#10;                    )&#10;                )&#10;                onDismiss()&#10;            }) { Text(&quot;Terapkan&quot;) }&#10;        },&#10;        dismissButton = { TextButton(onClick = onDismiss) { Text(&quot;Batal&quot;) } },&#10;        modifier = modifier&#10;    )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/list/ProductListScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/id/stargan/intikasir/feature/product/ui/list/ProductListScreen.kt" />
              <option name="originalContent" value="package id.stargan.intikasir.feature.product.ui.list&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import androidx.lifecycle.compose.collectAsStateWithLifecycle&#10;import id.stargan.intikasir.feature.product.ui.components.ProductFilterDialog&#10;import id.stargan.intikasir.feature.product.ui.components.ProductListItem&#10;import id.stargan.intikasir.feature.product.ui.components.ProductSortDialog&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListUiState&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListUiEvent&#10;/**&#10; * Product List Screen&#10; * Menampilkan daftar produk dengan filter, sort, dan search&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ProductListScreen(&#10;    onProductClick: (String) -&gt; Unit,&#10;    onAddProductClick: () -&gt; Unit,&#10;    onManageCategoriesClick: () -&gt; Unit,&#10;    onBackClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: ProductListViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            ProductListTopBar(&#10;                searchQuery = uiState.searchQuery,&#10;                onSearchQueryChange = {&#10;                    viewModel.onEvent(ProductListUiEvent.SearchQueryChanged(it))&#10;                },&#10;                onFilterClick = {&#10;                    viewModel.onEvent(ProductListUiEvent.ShowFilterDialog)&#10;                },&#10;                onSortClick = {&#10;                    viewModel.onEvent(ProductListUiEvent.ShowSortDialog)&#10;                },&#10;                onManageCategoriesClick = {&#10;                    viewModel.onEvent(ProductListUiEvent.ManageCategoriesClicked)&#10;                    onManageCategoriesClick()&#10;                },&#10;                onBackClick = onBackClick,&#10;                isAdmin = uiState.isAdmin&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            if (uiState.isAdmin) {&#10;                FloatingActionButton(&#10;                    onClick = {&#10;                        viewModel.onEvent(ProductListUiEvent.AddProductClicked)&#10;                        onAddProductClick()&#10;                    }&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Add,&#10;                        contentDescription = &quot;Tambah Produk&quot;&#10;                    )&#10;                }&#10;            }&#10;        },&#10;        modifier = modifier&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            when {&#10;                uiState.isLoading -&gt; {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                uiState.error != null -&gt; {&#10;                    ErrorContent(&#10;                        error = uiState.error!!,&#10;                        onRetry = { viewModel.onEvent(ProductListUiEvent.RefreshProducts) },&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                uiState.products.isEmpty() -&gt; {&#10;                    EmptyContent(&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                else -&gt; {&#10;                    LazyColumn(&#10;                        contentPadding = PaddingValues(16.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        items(&#10;                            items = uiState.products,&#10;                            key = { it.id }&#10;                        ) { product -&gt;&#10;                            ProductListItem(&#10;                                product = product,&#10;                                onClick = {&#10;                                    viewModel.onEvent(ProductListUiEvent.ProductClicked(product.id))&#10;                                    onProductClick(product.id)&#10;                                }&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Filter Dialog&#10;        if (uiState.showFilterDialog) {&#10;            ProductFilterDialog(&#10;                currentFilter = uiState.currentFilter,&#10;                categories = uiState.categories,&#10;                onFilterChanged = {&#10;                    viewModel.onEvent(ProductListUiEvent.FilterChanged(it))&#10;                },&#10;                onDismiss = {&#10;                    viewModel.onEvent(ProductListUiEvent.HideFilterDialog)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Sort Dialog&#10;        if (uiState.showSortDialog) {&#10;            ProductSortDialog(&#10;                currentSort = uiState.currentSort,&#10;                onSortChanged = {&#10;                    viewModel.onEvent(ProductListUiEvent.SortChanged(it))&#10;                },&#10;                onDismiss = {&#10;                    viewModel.onEvent(ProductListUiEvent.HideSortDialog)&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;/**&#10; * Top Bar dengan search dan actions&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun ProductListTopBar(&#10;    searchQuery: String,&#10;    onSearchQueryChange: (String) -&gt; Unit,&#10;    onFilterClick: () -&gt; Unit,&#10;    onSortClick: () -&gt; Unit,&#10;    onManageCategoriesClick: () -&gt; Unit,&#10;    onBackClick: () -&gt; Unit,&#10;    isAdmin: Boolean,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var isSearchActive by remember { mutableStateOf(false) }&#10;&#10;    Column(modifier = modifier) {&#10;        TopAppBar(&#10;            title = {&#10;                if (isSearchActive) {&#10;                    TextField(&#10;                        value = searchQuery,&#10;                        onValueChange = onSearchQueryChange,&#10;                        placeholder = { Text(&quot;Cari produk...&quot;) },&#10;                        singleLine = true,&#10;                        colors = TextFieldDefaults.colors(&#10;                            focusedContainerColor = MaterialTheme.colorScheme.surface,&#10;                            unfocusedContainerColor = MaterialTheme.colorScheme.surface&#10;                        )&#10;                    )&#10;                } else {&#10;                    Text(&quot;Daftar Produk&quot;)&#10;                }&#10;            },&#10;            navigationIcon = {&#10;                IconButton(onClick = onBackClick) {&#10;                    Icon(&#10;                        imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                        contentDescription = &quot;Kembali&quot;&#10;                    )&#10;                }&#10;            },&#10;            actions = {&#10;                if (!isSearchActive) {&#10;                    IconButton(onClick = { isSearchActive = true }) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Search,&#10;                            contentDescription = &quot;Cari&quot;&#10;                        )&#10;                    }&#10;                } else {&#10;                    IconButton(onClick = {&#10;                        isSearchActive = false&#10;                        onSearchQueryChange(&quot;&quot;)&#10;                    }) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Close,&#10;                            contentDescription = &quot;Tutup&quot;&#10;                        )&#10;                    }&#10;                }&#10;&#10;                IconButton(onClick = onSortClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Sort,&#10;                        contentDescription = &quot;Urutkan&quot;&#10;                    )&#10;                }&#10;&#10;                IconButton(onClick = onFilterClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.FilterAlt,&#10;                        contentDescription = &quot;Filter&quot;&#10;                    )&#10;                }&#10;&#10;                if (isAdmin) {&#10;                    IconButton(onClick = onManageCategoriesClick) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Category,&#10;                            contentDescription = &quot;Kelola Kategori&quot;&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Empty Content&#10; */&#10;@Composable&#10;private fun EmptyContent(&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.Inventory,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(64.dp),&#10;            tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;        Text(&#10;            text = &quot;Tidak ada produk&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            textAlign = TextAlign.Center&#10;        )&#10;        Text(&#10;            text = &quot;Tambahkan produk baru untuk memulai&quot;,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            textAlign = TextAlign.Center,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Error Content&#10; */&#10;@Composable&#10;private fun ErrorContent(&#10;    error: String,&#10;    onRetry: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.ErrorOutline,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(64.dp),&#10;            tint = MaterialTheme.colorScheme.error&#10;        )&#10;        Text(&#10;            text = &quot;Terjadi Kesalahan&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            textAlign = TextAlign.Center&#10;        )&#10;        Text(&#10;            text = error,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            textAlign = TextAlign.Center,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;        Button(onClick = onRetry) {&#10;            Text(&quot;Coba Lagi&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;&#10;" />
              <option name="updatedContent" value="package id.stargan.intikasir.feature.product.ui.list&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.navigation.compose.hiltViewModel&#10;import androidx.lifecycle.compose.collectAsStateWithLifecycle&#10;import id.stargan.intikasir.feature.product.ui.components.ProductFilterDialog&#10;import id.stargan.intikasir.feature.product.ui.components.ProductListItem&#10;import id.stargan.intikasir.feature.product.ui.components.ProductSortDialog&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListUiState&#10;import id.stargan.intikasir.feature.product.ui.list.ProductListUiEvent&#10;&#10;/**&#10; * Product List Screen&#10; * Menampilkan daftar produk dengan filter, sort, dan search&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ProductListScreen(&#10;    onProductClick: (String) -&gt; Unit,&#10;    onAddProductClick: () -&gt; Unit,&#10;    onManageCategoriesClick: () -&gt; Unit,&#10;    onBackClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    viewModel: ProductListViewModel = hiltViewModel()&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            Column {&#10;                ProductListTopBar(&#10;                    searchQuery = uiState.searchQuery,&#10;                    onSearchQueryChange = {&#10;                        viewModel.onEvent(ProductListUiEvent.SearchQueryChanged(it))&#10;                    },&#10;                    onFilterClick = {&#10;                        viewModel.onEvent(ProductListUiEvent.ShowFilterDialog)&#10;                    },&#10;                    onSortClick = {&#10;                        viewModel.onEvent(ProductListUiEvent.ShowSortDialog)&#10;                    },&#10;                    onManageCategoriesClick = {&#10;                        viewModel.onEvent(ProductListUiEvent.ManageCategoriesClicked)&#10;                        onManageCategoriesClick()&#10;                    },&#10;                    onBackClick = onBackClick,&#10;                    isAdmin = uiState.isAdmin&#10;                )&#10;                &#10;                // Active Filter Chips&#10;                ActiveFilterChips(&#10;                    uiState = uiState,&#10;                    onClearFilter = { viewModel.onEvent(ProductListUiEvent.FilterChanged(id.stargan.intikasir.feature.product.domain.model.ProductFilter())) },&#10;                    onClearCategoryFilter = { &#10;                        viewModel.onEvent(ProductListUiEvent.FilterChanged(uiState.currentFilter.copy(categoryId = null)))&#10;                    },&#10;                    onClearPriceFilter = {&#10;                        viewModel.onEvent(ProductListUiEvent.FilterChanged(uiState.currentFilter.copy(minPrice = null, maxPrice = null)))&#10;                    }&#10;                )&#10;            }&#10;        },&#10;        floatingActionButton = {&#10;            if (uiState.isAdmin) {&#10;                FloatingActionButton(&#10;                    onClick = {&#10;                        viewModel.onEvent(ProductListUiEvent.AddProductClicked)&#10;                        onAddProductClick()&#10;                    }&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Add,&#10;                        contentDescription = &quot;Tambah Produk&quot;&#10;                    )&#10;                }&#10;            }&#10;        },&#10;        modifier = modifier&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            when {&#10;                uiState.isLoading -&gt; {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                uiState.error != null -&gt; {&#10;                    ErrorContent(&#10;                        error = uiState.error!!,&#10;                        onRetry = { viewModel.onEvent(ProductListUiEvent.RefreshProducts) },&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                uiState.products.isEmpty() -&gt; {&#10;                    EmptyContent(&#10;                        modifier = Modifier.align(Alignment.Center)&#10;                    )&#10;                }&#10;                else -&gt; {&#10;                    LazyColumn(&#10;                        contentPadding = PaddingValues(16.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        items(&#10;                            items = uiState.products,&#10;                            key = { it.id }&#10;                        ) { product -&gt;&#10;                            ProductListItem(&#10;                                product = product,&#10;                                onClick = {&#10;                                    viewModel.onEvent(ProductListUiEvent.ProductClicked(product.id))&#10;                                    onProductClick(product.id)&#10;                                }&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Filter Dialog&#10;        if (uiState.showFilterDialog) {&#10;            ProductFilterDialog(&#10;                currentFilter = uiState.currentFilter,&#10;                categories = uiState.categories,&#10;                onFilterChanged = {&#10;                    viewModel.onEvent(ProductListUiEvent.FilterChanged(it))&#10;                },&#10;                onDismiss = {&#10;                    viewModel.onEvent(ProductListUiEvent.HideFilterDialog)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Sort Dialog&#10;        if (uiState.showSortDialog) {&#10;            ProductSortDialog(&#10;                currentSort = uiState.currentSort,&#10;                onSortChanged = {&#10;                    viewModel.onEvent(ProductListUiEvent.SortChanged(it))&#10;                },&#10;                onDismiss = {&#10;                    viewModel.onEvent(ProductListUiEvent.HideSortDialog)&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;/**&#10; * Top Bar dengan search dan actions&#10; */&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun ProductListTopBar(&#10;    searchQuery: String,&#10;    onSearchQueryChange: (String) -&gt; Unit,&#10;    onFilterClick: () -&gt; Unit,&#10;    onSortClick: () -&gt; Unit,&#10;    onManageCategoriesClick: () -&gt; Unit,&#10;    onBackClick: () -&gt; Unit,&#10;    isAdmin: Boolean,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var isSearchActive by remember { mutableStateOf(false) }&#10;&#10;    Column(modifier = modifier) {&#10;        TopAppBar(&#10;            title = {&#10;                if (isSearchActive) {&#10;                    TextField(&#10;                        value = searchQuery,&#10;                        onValueChange = onSearchQueryChange,&#10;                        placeholder = { Text(&quot;Cari produk...&quot;) },&#10;                        singleLine = true,&#10;                        colors = TextFieldDefaults.colors(&#10;                            focusedContainerColor = MaterialTheme.colorScheme.surface,&#10;                            unfocusedContainerColor = MaterialTheme.colorScheme.surface&#10;                        )&#10;                    )&#10;                } else {&#10;                    Text(&quot;Daftar Produk&quot;)&#10;                }&#10;            },&#10;            navigationIcon = {&#10;                IconButton(onClick = onBackClick) {&#10;                    Icon(&#10;                        imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                        contentDescription = &quot;Kembali&quot;&#10;                    )&#10;                }&#10;            },&#10;            actions = {&#10;                if (!isSearchActive) {&#10;                    IconButton(onClick = { isSearchActive = true }) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Search,&#10;                            contentDescription = &quot;Cari&quot;&#10;                        )&#10;                    }&#10;                } else {&#10;                    IconButton(onClick = {&#10;                        isSearchActive = false&#10;                        onSearchQueryChange(&quot;&quot;)&#10;                    }) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Close,&#10;                            contentDescription = &quot;Tutup&quot;&#10;                        )&#10;                    }&#10;                }&#10;&#10;                IconButton(onClick = onSortClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Sort,&#10;                        contentDescription = &quot;Urutkan&quot;&#10;                    )&#10;                }&#10;&#10;                IconButton(onClick = onFilterClick) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.FilterAlt,&#10;                        contentDescription = &quot;Filter&quot;&#10;                    )&#10;                }&#10;&#10;                if (isAdmin) {&#10;                    IconButton(onClick = onManageCategoriesClick) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Category,&#10;                            contentDescription = &quot;Kelola Kategori&quot;&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Active Filter Chips - Shows currently active filters&#10; */&#10;@Composable&#10;private fun ActiveFilterChips(&#10;    uiState: ProductListUiState,&#10;    onClearFilter: () -&gt; Unit,&#10;    onClearCategoryFilter: () -&gt; Unit,&#10;    onClearPriceFilter: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val filter = uiState.currentFilter&#10;    val hasActiveFilters = filter.categoryId != null || &#10;                          filter.inStockOnly || &#10;                          filter.lowStockOnly || &#10;                          !filter.activeOnly ||&#10;                          filter.minPrice != null ||&#10;                          filter.maxPrice != null&#10;    &#10;    if (hasActiveFilters) {&#10;        LazyRow(&#10;            modifier = modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 16.dp, vertical = 8.dp),&#10;            horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;        ) {&#10;            // Category chip&#10;            filter.categoryId?.let { catId -&gt;&#10;                val categoryName = uiState.categories.find { it.id == catId }?.name ?: &quot;Kategori&quot;&#10;                item {&#10;                    FilterChip(&#10;                        selected = true,&#10;                        onClick = onClearCategoryFilter,&#10;                        label = { Text(categoryName, maxLines = 1, overflow = TextOverflow.Ellipsis) },&#10;                        trailingIcon = {&#10;                            Icon(&#10;                                imageVector = Icons.Default.Close,&#10;                                contentDescription = &quot;Hapus filter&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;            &#10;            // In Stock chip&#10;            if (filter.inStockOnly) {&#10;                item {&#10;                    FilterChip(&#10;                        selected = true,&#10;                        onClick = { /* handled by clear all */ },&#10;                        label = { Text(&quot;Tersedia&quot;) }&#10;                    )&#10;                }&#10;            }&#10;            &#10;            // Low Stock chip&#10;            if (filter.lowStockOnly) {&#10;                item {&#10;                    FilterChip(&#10;                        selected = true,&#10;                        onClick = { /* handled by clear all */ },&#10;                        label = { Text(&quot;Stok Menipis&quot;) }&#10;                    )&#10;                }&#10;            }&#10;            &#10;            // Inactive products chip&#10;            if (!filter.activeOnly) {&#10;                item {&#10;                    FilterChip(&#10;                        selected = true,&#10;                        onClick = { /* handled by clear all */ },&#10;                        label = { Text(&quot;Termasuk Nonaktif&quot;) }&#10;                    )&#10;                }&#10;            }&#10;            &#10;            // Price range chip&#10;            if (filter.minPrice != null || filter.maxPrice != null) {&#10;                item {&#10;                    val priceText = buildString {&#10;                        append(&quot;Rp &quot;)&#10;                        if (filter.minPrice != null &amp;&amp; filter.maxPrice != null) {&#10;                            append(&quot;${filter.minPrice.toInt()}-${filter.maxPrice.toInt()}&quot;)&#10;                        } else if (filter.minPrice != null) {&#10;                            append(&quot;≥ ${filter.minPrice.toInt()}&quot;)&#10;                        } else {&#10;                            append(&quot;≤ ${filter.maxPrice!!.toInt()}&quot;)&#10;                        }&#10;                    }&#10;                    FilterChip(&#10;                        selected = true,&#10;                        onClick = onClearPriceFilter,&#10;                        label = { Text(priceText) },&#10;                        trailingIcon = {&#10;                            Icon(&#10;                                imageVector = Icons.Default.Close,&#10;                                contentDescription = &quot;Hapus filter harga&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;            &#10;            // Clear all filters&#10;            item {&#10;                AssistChip(&#10;                    onClick = onClearFilter,&#10;                    label = { Text(&quot;Hapus Semua&quot;) },&#10;                    leadingIcon = {&#10;                        Icon(&#10;                            imageVector = Icons.Default.Clear,&#10;                            contentDescription = null,&#10;                            modifier = Modifier.size(16.dp)&#10;                        )&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;/**&#10; * Empty Content&#10; */&#10;@Composable&#10;private fun EmptyContent(&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.Inventory,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(64.dp),&#10;            tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;        Text(&#10;            text = &quot;Tidak ada produk&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            textAlign = TextAlign.Center&#10;        )&#10;        Text(&#10;            text = &quot;Tambahkan produk baru untuk memulai&quot;,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            textAlign = TextAlign.Center,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;    }&#10;}&#10;&#10;/**&#10; * Error Content&#10; */&#10;@Composable&#10;private fun ErrorContent(&#10;    error: String,&#10;    onRetry: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Column(&#10;        modifier = modifier.padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        Icon(&#10;            imageVector = Icons.Default.ErrorOutline,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(64.dp),&#10;            tint = MaterialTheme.colorScheme.error&#10;        )&#10;        Text(&#10;            text = &quot;Terjadi Kesalahan&quot;,&#10;            style = MaterialTheme.typography.titleMedium,&#10;            textAlign = TextAlign.Center&#10;        )&#10;        Text(&#10;            text = error,&#10;            style = MaterialTheme.typography.bodyMedium,&#10;            textAlign = TextAlign.Center,&#10;            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;        )&#10;        Button(onClick = onRetry) {&#10;            Text(&quot;Coba Lagi&quot;)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>